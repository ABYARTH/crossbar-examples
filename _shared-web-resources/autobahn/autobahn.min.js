/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(r,n,q){r!=Array.prototype&&r!=Object.prototype&&(r[n]=q.value)};$jscomp.getGlobal=function(r){return"undefined"!=typeof window&&window===r?r:"undefined"!=typeof global&&null!=global?global:r};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(r){return $jscomp.SYMBOL_PREFIX+(r||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var r=$jscomp.global.Symbol.iterator;r||(r=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[r]&&$jscomp.defineProperty(Array.prototype,r,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(r){var n=0;return $jscomp.iteratorPrototype(function(){return n<r.length?{done:!1,value:r[n++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(r){$jscomp.initSymbolIterator();r={next:r};r[$jscomp.global.Symbol.iterator]=function(){return this};return r};$jscomp.makeIterator=function(r){$jscomp.initSymbolIterator();var n=r[Symbol.iterator];return n?n.call(r):$jscomp.arrayIterator(r)};
$jscomp.polyfill=function(r,n,q,k){if(n){q=$jscomp.global;r=r.split(".");for(k=0;k<r.length-1;k++){var c=r[k];c in q||(q[c]={});q=q[c]}r=r[r.length-1];k=q[r];n=n(k);n!=k&&null!=n&&$jscomp.defineProperty(q,r,{configurable:!0,writable:!0,value:n})}};$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(r){function n(){this.batch_=null}if(r&&!$jscomp.FORCE_POLYFILL_PROMISE)return r;n.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};n.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var q=$jscomp.global.setTimeout;n.prototype.asyncExecuteFunction=function(a){q(a,0)};n.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var b=a[c];delete a[c];try{b()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};n.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var k=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(b){c.reject(b)}};k.prototype.createResolveAndReject_=function(){function a(a){return function(d){b||(b=!0,a.call(c,d))}}var c=this,b=
!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};k.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof k)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};k.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(b){this.reject_(b);return}"function"==typeof c?
this.settleSameAsThenable_(c,a):this.fulfill_(a)};k.prototype.reject_=function(a){this.settle_(2,a)};k.prototype.fulfill_=function(a){this.settle_(1,a)};k.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,c=0;c<a.length;++c)a[c].call(),
a[c]=null;this.onSettledCallbacks_=null}};var c=new n;k.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};k.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(f){b.reject(f)}};k.prototype.then=function(a,c){function b(a,b){return"function"==typeof a?function(b){try{f(a(b))}catch(x){d(x)}}:b}var f,d,p=new k(function(a,b){f=a;d=b});this.callWhenSettled_(b(a,f),
b(c,d));return p};k.prototype["catch"]=function(a){return this.then(void 0,a)};k.prototype.callWhenSettled_=function(a,p){function b(){switch(f.state_){case 1:a(f.result_);break;case 2:p(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?c.asyncExecute(b):this.onSettledCallbacks_.push(function(){c.asyncExecute(b)})};k.resolve=function(a){return a instanceof k?a:new k(function(c,b){c(a)})};k.reject=function(a){return new k(function(c,b){b(a)})};
k.race=function(a){return new k(function(c,b){for(var f=$jscomp.makeIterator(a),d=f.next();!d.done;d=f.next())k.resolve(d.value).callWhenSettled_(c,b)})};k.all=function(a){var c=$jscomp.makeIterator(a),b=c.next();return b.done?k.resolve([]):new k(function(a,d){function f(b){return function(c){p[b]=c;v--;0==v&&a(p)}}var p=[],v=0;do p.push(void 0),v++,k.resolve(b.value).callWhenSettled_(f(p.length-1),d),b=c.next();while(!b.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(k.$jscomp$new$AsyncExecutor=function(){return new n});
return k},"es6-impl","es3");$jscomp.iteratorFromArray=function(r,n){$jscomp.initSymbolIterator();r instanceof String&&(r+="");var q=0,k={next:function(){if(q<r.length){var c=q++;return{value:n(c,r[c]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};$jscomp.polyfill("Array.prototype.keys",function(r){return r?r:function(){return $jscomp.iteratorFromArray(this,function(n){return n})}},"es6-impl","es3");
$jscomp.polyfill("Number.isFinite",function(r){return r?r:function(n){return"number"!==typeof n?!1:!isNaN(n)&&Infinity!==n&&-Infinity!==n}},"es6-impl","es3");$jscomp.polyfill("Number.isInteger",function(r){return r?r:function(n){return Number.isFinite(n)?n===Math.floor(n):!1}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(r){return r?r:function(n,q,k){var c=this.length||0;0>q&&(q=Math.max(0,c+q));if(null==k||k>c)k=c;k=Number(k);0>k&&(k=Math.max(0,c+k));for(q=Number(q||0);q<k;q++)this[q]=n;return this}},"es6-impl","es3");
(function(r){"object"===typeof exports&&"undefined"!==typeof module?module.exports=r():"function"===typeof define&&define.amd?define([],r):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).autobahn=r()})(function(){return function n(q,k,c){function a(b,d){if(!k[b]){if(!q[b]){var f="function"==typeof require&&require;if(!d&&f)return f(b,!0);if(p)return p(b,!0);f=Error("Cannot find module '"+b+"'");throw f.code="MODULE_NOT_FOUND",f;}f=k[b]={exports:{}};
q[b][0].call(f.exports,function(c){var d=q[b][1][c];return a(d?d:c)},f,f.exports,n,q,k,c)}return k[b].exports}for(var p="function"==typeof require&&require,b=0;b<c.length;b++)a(c[b]);return a}({1:[function(n,q,k){var c=n("crypto-js");k.sign=function(a,p){return c.HmacSHA256(p,a).toString(c.enc.Base64)};k.derive_key=function(a,p,b,f){return c.PBKDF2(a,p,{keySize:(f||32)/4,iterations:b||1E3,hasher:c.algo.SHA256}).toString(c.enc.Base64)}},{"crypto-js":void 0}],2:[function(n,q,k){n("when");n("when/function");
k.auth=function(c,a,p){var b=c.defer();navigator.id.watch({loggedInUser:a,onlogin:function(a){b.resolve(a)},onlogout:function(){c.leave("wamp.close.logout")}});return b.promise.then?b.promise:b}},{when:void 0,"when/function":void 0}],3:[function(n,q,k){var c="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};n("./polyfill.js");q=n("../package.json");var a=n("when"),p=n("msgpack-lite"),b=n("cbor");"AUTOBAHN_DEBUG"in c&&AUTOBAHN_DEBUG&&(n("when/monitor/console"),
"console"in c&&console.log("AutobahnJS debug enabled"));var c=n("./util.js"),f=n("./log.js"),d=n("./session.js"),u=n("./connection.js"),D=n("./configure.js"),v=n("./serializer.js"),m=n("./auth/persona.js");n=n("./auth/cra.js");k.version=q.version;k.transports=D.transports;k.Connection=u.Connection;k.Session=d.Session;k.Invocation=d.Invocation;k.Event=d.Event;k.Result=d.Result;k.Error=d.Error;k.Subscription=d.Subscription;k.Registration=d.Registration;k.Publication=d.Publication;k.serializer=v;k.auth_persona=
m.auth;k.auth_cra=n;k.when=a;k.msgpack=p;k.cbor=b;k.util=c;k.log=f},{"../package.json":21,"./auth/cra.js":1,"./auth/persona.js":2,"./configure.js":4,"./connection.js":5,"./log.js":6,"./polyfill.js":7,"./serializer.js":15,"./session.js":16,"./util.js":20,cbor:void 0,"msgpack-lite":void 0,when:void 0,"when/monitor/console":void 0}],4:[function(n,q,k){function c(){this._repository={}}c.prototype.register=function(a,b){this._repository[a]=b};c.prototype.isRegistered=function(a){return this._repository[a]?
!0:!1};c.prototype.get=function(a){if(void 0!==this._repository[a])return this._repository[a];throw"no such transport: "+a;};c.prototype.list=function(){var a=[],b;for(b in this._repository)a.push(b);return a};q=new c;var a=n("./transport/websocket.js");q.register("websocket",a.Factory);a=n("./transport/longpoll.js");q.register("longpoll",a.Factory);n=n("./transport/rawsocket.js");q.register("rawsocket",n.Factory);k.transports=q},{"./transport/longpoll.js":17,"./transport/rawsocket.js":18,"./transport/websocket.js":19}],
5:[function(n,q,k){(function(c){var a=n("when"),p=n("./session.js"),b=n("./util.js"),f=n("./log.js"),d=n("./autobahn.js"),u=function(b){(this._options=b)&&b.use_es6_promises?"Promise"in c?this._defer=function(){var a={};a.promise=new Promise(function(b,c){a.resolve=b;a.reject=c});return a}:(f.debug("Warning: ES6 promises requested, but not found! Falling back to whenjs."),this._defer=a.defer):this._defer=b&&b.use_deferred?b.use_deferred:a.defer;this._options.transports||(this._options.transports=
[{type:"websocket",url:this._options.url}]);this._transport_factories=[];this._init_transport_factories();this._session_close_message=this._session_close_reason=this._session=null;this._retry_if_unreachable=void 0!==this._options.retry_if_unreachable?this._options.retry_if_unreachable:!0;this._max_retries="undefined"!==typeof this._options.max_retries?this._options.max_retries:15;this._initial_retry_delay=this._options.initial_retry_delay||1.5;this._max_retry_delay=this._options.max_retry_delay||
300;this._retry_delay_growth=this._options.retry_delay_growth||1.5;this._retry_delay_jitter=this._options.retry_delay_jitter||.1;this._connect_successes=0;this._retry=!1;this._retry_count=0;this._retry_delay=this._initial_retry_delay;this._is_retrying=!1;this._retry_timer=null};u.prototype._create_transport=function(){for(var a=0;a<this._transport_factories.length;++a){var b=this._transport_factories[a];f.debug("trying to create WAMP transport of type: "+b.type);try{var c=b.create();if(c)return f.debug("using WAMP transport type: "+
b.type),c}catch(x){f.warn("could not create WAMP transport '"+b.type+"': "+x)}}f.warn("could not create any WAMP transport");return null};u.prototype._init_transport_factories=function(){var a;b.assert(this._options.transports,"No transport.factory specified");for(var c=0;c<this._options.transports.length;++c){var m=this._options.transports[c];m.url||(m.url=this._options.url);m.serializers||(m.serializers=this._options.serializers);m.protocols||(m.protocols=this._options.protocols);b.assert(m.type,
"No transport.type specified");b.assert("string"===typeof m.type,"transport.type must be a string");try{if(a=d.transports.get(m.type)){var f=new a(m);this._transport_factories.push(f)}}catch(C){console.error(C)}}};u.prototype._autoreconnect_reset_timer=function(){this._retry_timer&&clearTimeout(this._retry_timer);this._retry_timer=null};u.prototype._autoreconnect_reset=function(){this._autoreconnect_reset_timer();this._retry_count=0;this._retry_delay=this._initial_retry_delay;this._is_retrying=!1};
u.prototype._autoreconnect_advance=function(){this._retry_delay_jitter&&(this._retry_delay=b.rand_normal(this._retry_delay,this._retry_delay*this._retry_delay_jitter));this._retry_delay>this._max_retry_delay&&(this._retry_delay=this._max_retry_delay);this._retry_count+=1;var a=this._retry&&(-1===this._max_retries||this._retry_count<=this._max_retries)?{count:this._retry_count,delay:this._retry_delay,will_retry:!0}:{count:null,delay:null,will_retry:!1};this._retry_delay_growth&&(this._retry_delay*=
this._retry_delay_growth);return a};u.prototype.open=function(){function a(){try{b._transport=b._create_transport()}catch(m){console.log(m)}if(b._transport)b._session=new p.Session(b._transport,b._defer,b._options.onchallenge),b._session_close_reason=null,b._session_close_message=null,b._transport.onopen=function(){b._autoreconnect_reset();b._connect_successes+=1;b._session.join(b._options.realm,b._options.authmethods,b._options.authid,b._options.authextra)},b._session.onjoin=function(a){if(b.onopen)try{a.transport=
b._transport.info,b.onopen(b._session,a)}catch(x){f.debug("Exception raised from app code while firing Connection.onopen()",x)}},b._session.onleave=function(a,c){b._session_close_reason=a;b._session_close_message=c.message||"";b._retry=!1;b._transport.close(1E3)},b._transport.onclose=function(c){b._autoreconnect_reset_timer();b._transport=null;if(0===b._connect_successes){var d="unreachable";b._retry_if_unreachable||(b._retry=!1)}else d=c.wasClean?"closed":"lost";var m=b._autoreconnect_advance();
if(b.onclose){c={reason:b._session_close_reason,message:b._session_close_message,retry_delay:m.delay,retry_count:m.count,will_retry:m.will_retry};try{var p=b.onclose(d,c)}catch(z){f.debug("Exception raised from app code while firing Connection.onclose()",z)}}b._session&&(b._session._id=null,b._session=null,b._session_close_reason=null,b._session_close_message=null);b._retry&&!p&&(m.will_retry?(b._is_retrying=!0,f.debug("retrying in "+m.delay+" s"),b._retry_timer=setTimeout(a,1E3*m.delay)):f.debug("giving up trying to reconnect"))};
else if(b._retry=!1,b.onclose)b.onclose("unsupported",{reason:null,message:null,retry_delay:null,retry_count:null,will_retry:!1})}var b=this;if(b._transport)throw"connection already open (or opening)";b._autoreconnect_reset();b._retry=!0;a()};u.prototype.close=function(a,b){if(!this._transport&&!this._is_retrying)throw"connection already closed";this._retry=!1;this._session&&this._session.isOpen?this._session.leave(a,b):this._transport&&this._transport.close(1E3)};Object.defineProperty(u.prototype,
"defer",{get:function(){return this._defer}});Object.defineProperty(u.prototype,"session",{get:function(){return this._session}});Object.defineProperty(u.prototype,"isOpen",{get:function(){return this._session&&this._session.isOpen?!0:!1}});Object.defineProperty(u.prototype,"isConnected",{get:function(){return this._transport?!0:!1}});Object.defineProperty(u.prototype,"transport",{get:function(){return this._transport?this._transport:{info:{type:"none",url:null,protocol:null}}}});Object.defineProperty(u.prototype,
"isRetrying",{get:function(){return this._is_retrying}});k.Connection=u}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./autobahn.js":3,"./log.js":6,"./session.js":16,"./util.js":20,when:void 0}],6:[function(n,q,k){(function(c){var a=function(){};"AUTOBAHN_DEBUG"in c&&AUTOBAHN_DEBUG&&"console"in c&&(a=function(){console.log.apply(console,arguments)});c=console.warn;k.debug=a;k.warn=c}).call(this,"undefined"!==typeof global?global:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],7:[function(n,q,k){n("./polyfill/object.js");n("./polyfill/array.js");n("./polyfill/string.js");n("./polyfill/function.js");n("./polyfill/console.js");n("./polyfill/typedarray.js");n("./polyfill/json.js")},{"./polyfill/array.js":8,"./polyfill/console.js":9,"./polyfill/function.js":10,"./polyfill/json.js":11,"./polyfill/object.js":12,"./polyfill/string.js":13,"./polyfill/typedarray.js":14}],8:[function(n,q,k){"function"!==typeof Array.prototype.reduce&&
(Array.prototype.reduce=function(c){if(null===this||"undefined"===typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!==typeof c)throw new TypeError(c+" is not a function");var a=Object(this);var p=a.length>>>0;var b=0;if(2<=arguments.length)var f=arguments[1];else{for(;b<p&&!b in a;)b++;if(b>=p)throw new TypeError("Reduce of empty array with no initial value");f=a[b++]}for(;b<p;b++)b in a&&(f=c(f,a[b],b,a));return f});"indexOf"in Array.prototype||(Array.prototype.indexOf=
function(c,a){void 0===a&&(a=0);0>a&&(a+=this.length);0>a&&(a=0);for(var p=this.length;a<p;a++)if(a in this&&this[a]===c)return a;return-1});"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(c,a){void 0===a&&(a=this.length-1);0>a&&(a+=this.length);a>this.length-1&&(a=this.length-1);for(a++;0<a--;)if(a in this&&this[a]===c)return a;return-1});"forEach"in Array.prototype||(Array.prototype.forEach=function(c,a){for(var p=0,b=this.length;p<b;p++)p in this&&c.call(a,this[p],p,this)});
"map"in Array.prototype||(Array.prototype.map=function(c,a){for(var p=Array(this.length),b=0,f=this.length;b<f;b++)b in this&&(p[b]=c.call(a,this[b],b,this));return p});"filter"in Array.prototype||(Array.prototype.filter=function(c,a){for(var p=[],b,f=0,d=this.length;f<d;f++)f in this&&c.call(a,b=this[f],f,this)&&p.push(b);return p});"every"in Array.prototype||(Array.prototype.every=function(c,a){for(var p=0,b=this.length;p<b;p++)if(p in this&&!c.call(a,this[p],p,this))return!1;return!0});"some"in
Array.prototype||(Array.prototype.some=function(c,a){for(var p=0,b=this.length;p<b;p++)if(p in this&&c.call(a,this[p],p,this))return!0;return!1});"function"!==typeof Array.prototype.reduceRight&&(Array.prototype.reduceRight=function(c){if(null===this||"undefined"===typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!==typeof c)throw new TypeError(c+" is not a function");var a=Object(this),p=(a.length>>>0)-1;if(2<=arguments.length)var b=arguments[1];
else{for(;0<=p&&!p in a;)p--;if(0>p)throw new TypeError("Reduce of empty array with no initial value");b=a[p--]}for(;0<=p;p--)p in a&&(b=c(b,a[p],p,a));return b})},{}],9:[function(n,q,k){(function(c){c||(c=window.console={log:function(a,c,b,f,d){},info:function(a,c,b,f,d){},warn:function(a,c,b,f,d){},error:function(a,c,b,f,d){},assert:function(a,c){}});"object"===typeof c.log&&(c.log=Function.prototype.call.bind(c.log,c),c.info=Function.prototype.call.bind(c.info,c),c.warn=Function.prototype.call.bind(c.warn,
c),c.error=Function.prototype.call.bind(c.error,c),c.debug=Function.prototype.call.bind(c.info,c));"group"in c||(c.group=function(a){c.info("\n--- "+a+" ---\n")});"groupEnd"in c||(c.groupEnd=function(){c.log("\n")});"assert"in c||(c.assert=function(a,c){if(!a)try{throw Error("assertion failed: "+c);}catch(b){setTimeout(function(){throw b;},0)}});"time"in c||function(){var a={};c.time=function(c){a[c]=(new Date).getTime()};c.timeEnd=function(p){var b=(new Date).getTime();c.info(p+": "+(p in a?b-a[p]:
0)+"ms")}}()})("undefined"!==typeof console?console:void 0)},{}],10:[function(n,q,k){Function.prototype.bind||(Function.prototype.bind=function(c){var a=this,p=Array.prototype.slice.call(arguments,1);return function(){return a.apply(c,Array.prototype.concat.apply(p,arguments))}})},{}],11:[function(n,q,k){"object"!==typeof JSON&&(JSON={});(function(){function c(a){return 10>a?"0"+a:a}function a(a){u.lastIndex=0;return u.test(a)?'"'+a.replace(u,function(a){var b=k[a];return"string"===typeof b?b:"\\u"+
("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function p(c,u){var m,k=b,z=u[c];z&&"object"===typeof z&&"function"===typeof z.toJSON&&(z=z.toJSON(c));"function"===typeof d&&(z=d.call(u,c,z));switch(typeof z){case "string":return a(z);case "number":return isFinite(z)?String(z):"null";case "boolean":case "null":return String(z);case "object":if(!z)return"null";b+=f;var v=[];if("[object Array]"===Object.prototype.toString.apply(z)){var n=z.length;for(m=0;m<n;m+=1)v[m]=p(m,z)||"null";
var g=0===v.length?"[]":b?"[\n"+b+v.join(",\n"+b)+"\n"+k+"]":"["+v.join(",")+"]";b=k;return g}if(d&&"object"===typeof d)for(n=d.length,m=0;m<n;m+=1){if("string"===typeof d[m]){var y=d[m];(g=p(y,z))&&v.push(a(y)+(b?": ":":")+g)}}else for(y in z)Object.prototype.hasOwnProperty.call(z,y)&&(g=p(y,z))&&v.push(a(y)+(b?": ":":")+g);g=0===v.length?"{}":b?"{\n"+b+v.join(",\n"+b)+"\n"+k+"}":"{"+v.join(",")+"}";b=k;return g}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?
this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b,f,d;if("function"!==typeof JSON.stringify){var u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f",
"\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(a,c,u){var m;f=b="";if("number"===typeof u)for(m=0;m<u;m+=1)f+=" ";else"string"===typeof u&&(f=u);if((d=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return p("",{"":a})}}if("function"!==typeof JSON.parse){var v=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(a,b){function c(a,d){var m,g=a[d];if(g&&"object"===
typeof g)for(m in g)if(Object.prototype.hasOwnProperty.call(g,m)){var y=c(g,m);void 0!==y?g[m]=y:delete g[m]}return b.call(a,d,g)}a=String(a);v.lastIndex=0;v.test(a)&&(a=a.replace(v,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){var d=eval("("+a+")");return"function"===typeof b?
c({"":d},""):d}throw new SyntaxError("JSON.parse");}}})();k.JSON=JSON},{}],12:[function(n,q,k){Object.create||(Object.create=function(){function c(){}return function(a){if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");c.prototype=a;return new c}}());Object.keys||(Object.keys=function(){var c=Object.prototype.hasOwnProperty,a=!{toString:null}.propertyIsEnumerable("toString"),p="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),
b=p.length;return function(f){if("object"!==typeof f&&("function"!==typeof f||null===f))throw new TypeError("Object.keys called on non-object");var d=[],u;for(u in f)c.call(f,u)&&d.push(u);if(a)for(u=0;u<b;u++)c.call(f,p[u])&&d.push(p[u]);return d}}())},{}],13:[function(n,q,k){"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")})},{}],14:[function(n,q,k){"undefined"===typeof Uint8Array&&function(c,a){function p(e){switch(typeof e){case "undefined":return"undefined";
case "boolean":return"boolean";case "number":return"number";case "string":return"string";default:return null===e?"null":"object"}}function b(e){return Object.prototype.toString.call(e).replace(/^\[object *|\]$/g,"")}function f(e){return"function"===typeof e}function d(e){if(null===e||void 0===e)throw TypeError();return Object(e)}function u(e){function h(h){Object.defineProperty(e,h,{get:function(){return e._getter(h)},set:function(a){e._setter(h,a)},enumerable:!0,configurable:!1})}if(1E5<e.length)throw RangeError("Array too large for polyfill");
var a;for(a=0;a<e.length;a+=1)h(a)}function k(e,h){var a=32-h;return e<<a>>a}function v(e,h){var a=32-h;return e<<a>>>a}function m(e){return[e&255]}function n(e){return k(e[0],8)}function C(e){return[e&255]}function w(e){return v(e[0],8)}function z(e){e=Q(Number(e));return[0>e?0:255<e?255:e&255]}function A(e){return[e>>8&255,e&255]}function B(e){return k(e[0]<<8|e[1],16)}function g(e){return[e>>8&255,e&255]}function y(e){return v(e[0]<<8|e[1],16)}function M(e){return[e>>24&255,e>>16&255,e>>8&255,
e&255]}function N(e){return k(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function q(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]}function O(e){return v(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function G(a,b,c){function g(e){var a=l(e);e-=a;return.5>e?a:.5<e?a+1:a%2?a+1:a}var d=(1<<b-1)-1;if(a!==a){var m=(1<<b)-1;var y=E(2,c-1);var f=0}else Infinity===a||-Infinity===a?(m=(1<<b)-1,y=0,f=0>a?1:0):0===a?(y=m=0,f=-Infinity===1/a?1:0):(f=0>a,a=h(a),a>=E(2,1-d)?(m=H(l(t(a)/e),1023),y=g(a/E(2,m)*E(2,c)),2<=y/E(2,c)&&
(m+=1,y=1),m>d?(m=(1<<b)-1,y=0):(m+=d,y-=E(2,c))):(m=0,y=g(a/E(2,1-d-c))));for(a=[];c;--c)a.push(y%2?1:0),y=l(y/2);for(c=b;c;--c)a.push(m%2?1:0),m=l(m/2);a.push(f?1:0);a.reverse();b=a.join("");for(f=[];b.length;)f.push(parseInt(b.substring(0,8),2)),b=b.substring(8);return f}function F(e,a,h){var b=[],l,c;for(l=e.length;l;--l){var g=e[l-1];for(c=8;c;--c)b.push(g%2?1:0),g>>=1}b.reverse();c=b.join("");e=(1<<a-1)-1;b=parseInt(c.substring(0,1),2)?-1:1;l=parseInt(c.substring(1,1+a),2);c=parseInt(c.substring(1+
a),2);return l===(1<<a)-1?0!==c?NaN:Infinity*b:0<l?b*E(2,l-e)*(1+c/E(2,h)):0!==c?b*E(2,-(e-1))*(c/E(2,h)):0>b?-0:0}function J(e){return F(e,11,52)}function K(e){return G(e,11,52)}function P(e){return F(e,8,23)}function R(e){return G(e,8,23)}var e=Math.LN2,h=Math.abs,l=Math.floor,t=Math.log,I=Math.max,H=Math.min,E=Math.pow,Q=Math.round;(function(){var e=Object.defineProperty;try{var a=Object.defineProperty({},"x",{})}catch(U){a=!1}e&&a||(Object.defineProperty=function(a,h,b){if(e)try{return e(a,h,
b)}catch(V){}if(a!==Object(a))throw TypeError("Object.defineProperty called on non-object");Object.prototype.__defineGetter__&&"get"in b&&Object.prototype.__defineGetter__.call(a,h,b.get);Object.prototype.__defineSetter__&&"set"in b&&Object.prototype.__defineSetter__.call(a,h,b.set);"value"in b&&(a[h]=b.value);return a})})();(function(){function e(e){e>>=0;if(0>e)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:e});Object.defineProperty(this,
"_bytes",{value:Array(e)});for(var a=0;a<e;a+=1)this._bytes[a]=0}function t(){if(!arguments.length||"object"!==typeof arguments[0])return function(a){a>>=0;if(0>a)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:a});Object.defineProperty(this,"byteLength",{value:a*this.BYTES_PER_ELEMENT});Object.defineProperty(this,"buffer",{value:new e(this.byteLength)});Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(1<=arguments.length&&
"object"===p(arguments[0])&&arguments[0]instanceof t)return function(a){if(this.constructor!==a.constructor)throw TypeError();var h=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new e(h)});Object.defineProperty(this,"byteLength",{value:h});Object.defineProperty(this,"byteOffset",{value:0});Object.defineProperty(this,"length",{value:a.length});for(h=0;h<this.length;h+=1)this._setter(h,a._getter(h))}.apply(this,arguments);if(1<=arguments.length&&"object"===p(arguments[0])&&
!(arguments[0]instanceof t)&&!(arguments[0]instanceof e||"ArrayBuffer"===b(arguments[0])))return function(a){var h=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new e(h)});Object.defineProperty(this,"byteLength",{value:h});Object.defineProperty(this,"byteOffset",{value:0});Object.defineProperty(this,"length",{value:a.length});for(h=0;h<this.length;h+=1)this._setter(h,Number(a[h]))}.apply(this,arguments);if(1<=arguments.length&&"object"===p(arguments[0])&&(arguments[0]instanceof
e||"ArrayBuffer"===b(arguments[0])))return function(e,a,h){a>>>=0;if(a>e.byteLength)throw RangeError("byteOffset out of range");if(a%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(void 0===h){var b=e.byteLength-a;if(b%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");h=b/this.BYTES_PER_ELEMENT}else h>>>=0,b=h*this.BYTES_PER_ELEMENT;if(a+b>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");
Object.defineProperty(this,"buffer",{value:e});Object.defineProperty(this,"byteLength",{value:b});Object.defineProperty(this,"byteOffset",{value:a});Object.defineProperty(this,"length",{value:h})}.apply(this,arguments);throw TypeError();}function k(e,a,h){var b=function(){Object.defineProperty(this,"constructor",{value:b});t.apply(this,arguments);u(this)};"__proto__"in b?b.__proto__=t:(b.from=t.from,b.of=t.of);b.BYTES_PER_ELEMENT=e;var l=function(){};l.prototype=v;b.prototype=new l;Object.defineProperty(b.prototype,
"BYTES_PER_ELEMENT",{value:e});Object.defineProperty(b.prototype,"_pack",{value:a});Object.defineProperty(b.prototype,"_unpack",{value:h});return b}c.ArrayBuffer=c.ArrayBuffer||e;Object.defineProperty(t,"from",{value:function(e){return new this(e)}});Object.defineProperty(t,"of",{value:function(){return new this(arguments)}});var v={};t.prototype=v;Object.defineProperty(t.prototype,"_getter",{value:function(e){if(1>arguments.length)throw SyntaxError("Not enough arguments");e>>>=0;if(!(e>=this.length)){var a=
[],h;var b=0;for(h=this.byteOffset+e*this.BYTES_PER_ELEMENT;b<this.BYTES_PER_ELEMENT;b+=1,h+=1)a.push(this.buffer._bytes[h]);return this._unpack(a)}}});Object.defineProperty(t.prototype,"get",{value:t.prototype._getter});Object.defineProperty(t.prototype,"_setter",{value:function(e,a){if(2>arguments.length)throw SyntaxError("Not enough arguments");e>>>=0;if(!(e>=this.length)){var h=this._pack(a),b;var l=0;for(b=this.byteOffset+e*this.BYTES_PER_ELEMENT;l<this.BYTES_PER_ELEMENT;l+=1,b+=1)this.buffer._bytes[b]=
h[l]}}});Object.defineProperty(t.prototype,"constructor",{value:t});Object.defineProperty(t.prototype,"copyWithin",{value:function(e,a,h){var b=d(this),l=b.length>>>0,l=I(l,0);e>>=0;e=0>e?I(l+e,0):H(e,l);a>>=0;a=0>a?I(l+a,0):H(a,l);h=void 0===h?l:h>>0;h=0>h?I(l+h,0):H(h,l);l=H(h-a,l-e);from<e&&e<a+l?(h=-1,a=a+l-1,e=e+l-1):h=1;for(;0<count;)b._setter(e,b._getter(a)),a+=h,e+=h,--l;return b}});Object.defineProperty(t.prototype,"every",{value:function(e,a){if(void 0===this||null===this)throw TypeError();
var h=Object(this),b=h.length>>>0;if(!f(e))throw TypeError();for(var l=0;l<b;l++)if(!e.call(a,h._getter(l),l,h))return!1;return!0}});Object.defineProperty(t.prototype,"fill",{value:function(e,a,h){var b=d(this),l=b.length>>>0,l=I(l,0);a>>=0;a=0>a?I(l+a,0):H(a,l);h=void 0===h?l:h>>0;for(l=0>h?I(l+h,0):H(h,l);a<l;)b._setter(a,e),a+=1;return b}});Object.defineProperty(t.prototype,"filter",{value:function(e,a){if(void 0===this||null===this)throw TypeError();var h=Object(this),b=h.length>>>0;if(!f(e))throw TypeError();
for(var l=[],c=0;c<b;c++){var t=h._getter(c);e.call(a,t,c,h)&&l.push(t)}return new this.constructor(l)}});Object.defineProperty(t.prototype,"find",{value:function(e){var a=d(this),h=a.length>>>0;if(!f(e))throw TypeError();for(var b=1<arguments.length?arguments[1]:void 0,l=0;l<h;){var c=a._getter(l);if(e.call(b,c,l,a))return c;++l}}});Object.defineProperty(t.prototype,"findIndex",{value:function(e){var a=d(this),h=a.length>>>0;if(!f(e))throw TypeError();for(var b=1<arguments.length?arguments[1]:void 0,
l=0;l<h;){var c=a._getter(l);if(e.call(b,c,l,a))return l;++l}return-1}});Object.defineProperty(t.prototype,"forEach",{value:function(e,a){if(void 0===this||null===this)throw TypeError();var h=Object(this),b=h.length>>>0;if(!f(e))throw TypeError();for(var l=0;l<b;l++)e.call(a,h._getter(l),l,h)}});Object.defineProperty(t.prototype,"indexOf",{value:function(e){if(void 0===this||null===this)throw TypeError();var a=Object(this),b=a.length>>>0;if(0===b)return-1;var c=0;if(0<arguments.length){var t=Number(arguments[1]);
t!==c?c=0:0!==t&&t!==1/0&&t!==-(1/0)&&(c=(0<t||-1)*l(h(t)))}if(c>=b)return-1;for(c=0<=c?c:I(b-h(c),0);c<b;c++)if(a._getter(c)===e)return c;return-1}});Object.defineProperty(t.prototype,"join",{value:function(e){if(void 0===this||null===this)throw TypeError();for(var a=Object(this),h=a.length>>>0,b=Array(h),l=0;l<h;++l)b[l]=a._getter(l);return b.join(void 0===e?",":e)}});Object.defineProperty(t.prototype,"lastIndexOf",{value:function(e){if(void 0===this||null===this)throw TypeError();var a=Object(this),
b=a.length>>>0;if(0===b)return-1;var c=b;1<arguments.length&&(c=Number(arguments[1]),c!==c?c=0:0!==c&&c!==1/0&&c!==-(1/0)&&(c=(0<c||-1)*l(h(c))));for(b=0<=c?H(c,b-1):b-h(c);0<=b;b--)if(a._getter(b)===e)return b;return-1}});Object.defineProperty(t.prototype,"map",{value:function(e,a){if(void 0===this||null===this)throw TypeError();var h=Object(this),b=h.length>>>0;if(!f(e))throw TypeError();var l=[];l.length=b;for(var c=0;c<b;c++)l[c]=e.call(a,h._getter(c),c,h);return new this.constructor(l)}});Object.defineProperty(t.prototype,
"reduce",{value:function(e){if(void 0===this||null===this)throw TypeError();var a=Object(this),h=a.length>>>0;if(!f(e))throw TypeError();if(0===h&&1===arguments.length)throw TypeError();var b=0,l;for(l=2<=arguments.length?arguments[1]:a._getter(b++);b<h;)l=e.call(void 0,l,a._getter(b),b,a),b++;return l}});Object.defineProperty(t.prototype,"reduceRight",{value:function(e){if(void 0===this||null===this)throw TypeError();var a=Object(this),h=a.length>>>0;if(!f(e))throw TypeError();if(0===h&&1===arguments.length)throw TypeError();
var h=h-1,b;for(b=2<=arguments.length?arguments[1]:a._getter(h--);0<=h;)b=e.call(void 0,b,a._getter(h),h,a),h--;return b}});Object.defineProperty(t.prototype,"reverse",{value:function(){if(void 0===this||null===this)throw TypeError();for(var e=Object(this),a=e.length>>>0,h=l(a/2),b=0,a=a-1;b<h;++b,--a){var c=e._getter(b);e._setter(b,e._getter(a));e._setter(a,c)}return e}});Object.defineProperty(t.prototype,"set",{value:function(e,a){if(1>arguments.length)throw SyntaxError("Not enough arguments");
var h;if("object"===typeof arguments[0]&&arguments[0].constructor===this.constructor){var b=arguments[0];var l=arguments[1]>>>0;if(l+b.length>this.length)throw RangeError("Offset plus length of array is out of range");var c=this.byteOffset+l*this.BYTES_PER_ELEMENT;l=b.length*this.BYTES_PER_ELEMENT;if(b.buffer===this.buffer){var t=[];var g=0;for(h=b.byteOffset;g<l;g+=1,h+=1)t[g]=b.buffer._bytes[h];for(g=0;g<l;g+=1,c+=1)this.buffer._bytes[c]=t[g]}else for(g=0,h=b.byteOffset;g<l;g+=1,h+=1,c+=1)this.buffer._bytes[c]=
b.buffer._bytes[h]}else if("object"===typeof arguments[0]&&"undefined"!==typeof arguments[0].length){b=arguments[0];t=b.length>>>0;l=arguments[1]>>>0;if(l+t>this.length)throw RangeError("Offset plus length of array is out of range");for(g=0;g<t;g+=1)h=b[g],this._setter(l+g,Number(h))}else throw TypeError("Unexpected argument type(s)");}});Object.defineProperty(t.prototype,"slice",{value:function(e,a){for(var h=d(this),b=h.length>>>0,l=e>>0,l=0>l?I(b+l,0):H(l,b),c=void 0===a?b:a>>0,b=0>c?I(b+c,0):
H(c,b),c=new h.constructor(b-l),t=0;l<b;){var g=h._getter(l);c._setter(t,g);++l;++t}return c}});Object.defineProperty(t.prototype,"some",{value:function(e,a){if(void 0===this||null===this)throw TypeError();var h=Object(this),b=h.length>>>0;if(!f(e))throw TypeError();for(var l=0;l<b;l++)if(e.call(a,h._getter(l),l,h))return!0;return!1}});Object.defineProperty(t.prototype,"sort",{value:function(e){if(void 0===this||null===this)throw TypeError();for(var a=Object(this),h=a.length>>>0,b=Array(h),l=0;l<
h;++l)b[l]=a._getter(l);e?b.sort(e):b.sort();for(l=0;l<h;++l)a._setter(l,b[l]);return a}});Object.defineProperty(t.prototype,"subarray",{value:function(e,a){e>>=0;a>>=0;1>arguments.length&&(e=0);2>arguments.length&&(a=this.length);0>e&&(e=this.length+e);0>a&&(a=this.length+a);var h=this.length;e=0>e?0:e>h?h:e;h=this.length;h=(0>a?0:a>h?h:a)-e;0>h&&(h=0);return new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,h)}});var x=k(1,m,n),D=k(1,C,w),L=k(1,z,w),E=k(2,A,B),F=k(2,g,y),
Q=k(4,M,N),G=k(4,q,O),S=k(4,R,P),T=k(8,K,J);c.Int8Array=a.Int8Array=c.Int8Array||x;c.Uint8Array=a.Uint8Array=c.Uint8Array||D;c.Uint8ClampedArray=a.Uint8ClampedArray=c.Uint8ClampedArray||L;c.Int16Array=a.Int16Array=c.Int16Array||E;c.Uint16Array=a.Uint16Array=c.Uint16Array||F;c.Int32Array=a.Int32Array=c.Int32Array||Q;c.Uint32Array=a.Uint32Array=c.Uint32Array||G;c.Float32Array=a.Float32Array=c.Float32Array||S;c.Float64Array=a.Float64Array=c.Float64Array||T})();(function(){function e(e,a){return f(e.get)?
e.get(a):e[a]}function a(e,a,h){if(!(e instanceof ArrayBuffer||"ArrayBuffer"===b(e)))throw TypeError();a>>>=0;if(a>e.byteLength)throw RangeError("byteOffset out of range");h=void 0===h?e.byteLength-a:h>>>0;if(a+h>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e});Object.defineProperty(this,"byteLength",{value:h});Object.defineProperty(this,"byteOffset",{value:a})}function h(a){return function(h,b){h>>>=
0;if(h+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");h+=this.byteOffset;for(var l=new c.Uint8Array(this.buffer,h,a.BYTES_PER_ELEMENT),g=[],d=0;d<a.BYTES_PER_ELEMENT;d+=1)g.push(e(l,d));!!b===!!t&&g.reverse();return e(new a((new c.Uint8Array(g)).buffer),0)}}function l(a){return function(h,b,l){h>>>=0;if(h+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");b=new a([b]);b=new c.Uint8Array(b.buffer);var g=[],d;for(d=0;d<a.BYTES_PER_ELEMENT;d+=
1)g.push(e(b,d));!!l===!!t&&g.reverse();(new Uint8Array(this.buffer,h,a.BYTES_PER_ELEMENT)).set(g)}}var t=function(){var a=new c.Uint16Array([4660]),a=new c.Uint8Array(a.buffer);return 18===e(a,0)}();Object.defineProperty(a.prototype,"getUint8",{value:h(c.Uint8Array)});Object.defineProperty(a.prototype,"getInt8",{value:h(c.Int8Array)});Object.defineProperty(a.prototype,"getUint16",{value:h(c.Uint16Array)});Object.defineProperty(a.prototype,"getInt16",{value:h(c.Int16Array)});Object.defineProperty(a.prototype,
"getUint32",{value:h(c.Uint32Array)});Object.defineProperty(a.prototype,"getInt32",{value:h(c.Int32Array)});Object.defineProperty(a.prototype,"getFloat32",{value:h(c.Float32Array)});Object.defineProperty(a.prototype,"getFloat64",{value:h(c.Float64Array)});Object.defineProperty(a.prototype,"setUint8",{value:l(c.Uint8Array)});Object.defineProperty(a.prototype,"setInt8",{value:l(c.Int8Array)});Object.defineProperty(a.prototype,"setUint16",{value:l(c.Uint16Array)});Object.defineProperty(a.prototype,"setInt16",
{value:l(c.Int16Array)});Object.defineProperty(a.prototype,"setUint32",{value:l(c.Uint32Array)});Object.defineProperty(a.prototype,"setInt32",{value:l(c.Int32Array)});Object.defineProperty(a.prototype,"setFloat32",{value:l(c.Float32Array)});Object.defineProperty(a.prototype,"setFloat64",{value:l(c.Float64Array)});c.DataView=c.DataView||a})()}(k,window);"undefined"===typeof window||"Uint8ClampedArray"in window||(window.Uint8ClampedArray=window.Uint8Array)},{}],15:[function(n,q,k){function c(){return Math.floor(9007199254740992*
Math.random())}function a(a,b){this.replacer=a;this.reviver=b;this.SERIALIZER_ID="json";this.BINARY=!1;this.newid=c}function p(){this.SERIALIZER_ID="msgpack";this.BINARY=!0;this.codec=d.createCodec();this.newid=function(){return new u(c())}}function b(){this.SERIALIZER_ID="cbor";this.BINARY=!0;this.newid=c}var f=n("./log.js");a.prototype.serialize=function(a){try{return JSON.stringify(a,this.replacer)}catch(m){throw f.warn("JSON encoding error",m),m;}};a.prototype.unserialize=function(a){try{return JSON.parse(a,
this.reviver)}catch(m){throw f.warn("JSON decoding error",m),m;}};k.JSONSerializer=a;var d=n("msgpack-lite"),u=n("int64-buffer").Uint64BE;p.prototype.serialize=function(a){try{return d.encode(a,{codec:this.codec})}catch(m){throw f.warn("MessagePack encoding error",m),m;}};p.prototype.unserialize=function(a){try{return d.decode(new Uint8Array(a),{codec:this.codec})}catch(m){throw f.warn("MessagePack decoding error",m),m;}};p.prototype.registerExtType=function(a,b,c,d){c&&b&&this.codec.addExtPacker(a,
b,c);d&&this.codec.addExtUnpacker(a,d)};k.MsgpackSerializer=p;var D=n("cbor");b.prototype.serialize=function(a){try{return D.encode(a)}catch(m){throw f.warn("CBOR encoding error",m),m;}};b.prototype.unserialize=function(a){try{return D.decodeFirstSync(a)}catch(m){throw f.warn("CBOR decoding error",m),m;}};k.CBORSerializer=b},{"./log.js":6,cbor:void 0,"int64-buffer":void 0,"msgpack-lite":void 0}],16:[function(n,q,k){(function(c){n("when");var a=n("when/function"),p=n("./log.js"),b=n("./util.js");Date.now=
Date.now||function(){return+new Date};var f={caller:{features:{caller_identification:!0,progressive_call_results:!0}},callee:{features:{caller_identification:!0,pattern_based_registration:!0,shared_registration:!0,progressive_call_results:!0,registration_revocation:!0}},publisher:{features:{publisher_identification:!0,subscriber_blackwhite_listing:!0,publisher_exclusion:!0}},subscriber:{features:{publisher_identification:!0,pattern_based_subscription:!0,subscription_revocation:!0}}},d=function(a,
b,c,g,d){this.procedure=a;this.progress=b;this.caller=c;this.caller_authid=g;this.caller_authrole=d},u=function(a,b,c,g,d,m){this.publication=a;this.topic=b;this.publisher=c;this.publisher_authid=g;this.publisher_authrole=d;this.retained=m},D=function(a,b){this.args=a||[];this.kwargs=b||{}},v=function(a,b,c){this.error=a;this.args=b||[];this.kwargs=c||{}},m=function(a,b,c,g,d){this.topic=a;this.handler=b;this.options=c||{};this.session=g;this.id=d;this.active=!0;this._on_unsubscribe=g._defer();this.on_unsubscribe=
this._on_unsubscribe.promise.then?this._on_unsubscribe.promise:this._on_unsubscribe};m.prototype.unsubscribe=function(){return this.session.unsubscribe(this)};var x=function(a,b,c,g,d){this.procedure=a;this.endpoint=b;this.options=c||{};this.session=g;this.id=d;this.active=!0;this._on_unregister=g._defer();this.on_unregister=this._on_unregister.promise.then?this._on_unregister.promise:this._on_unregister};x.prototype.unregister=function(){return this.session.unregister(this)};var C=function(a){this.id=
a},w=function(b,k,n){var g=this;g._socket=b;g._defer=k;g._onchallenge=n;g._id=null;g._realm=null;g._features=null;g._goodbye_sent=!1;g._transport_is_closing=!1;g._publish_reqs={};g._subscribe_reqs={};g._unsubscribe_reqs={};g._call_reqs={};g._register_reqs={};g._unregister_reqs={};g._subscriptions={};g._registrations={};g._invocations={};g._prefixes={};g._caller_disclose_me=!1;g._publisher_disclose_me=!1;g._send_wamp=function(a){p.debug(a);g._socket.send(a)};g._protocol_violation=function(a){p.warn("failing transport due to protocol violation: "+
a);g._socket.close(1002,"protocol violation: "+a)};g._MESSAGE_MAP={};g._MESSAGE_MAP[8]={};g._process_SUBSCRIBED=function(a){var b=a[1];a=a[2];if(b in g._subscribe_reqs){var c=g._subscribe_reqs[b],d=c[0],f=c[1],y=c[2],c=c[3];a in g._subscriptions||(g._subscriptions[a]=[]);f=new m(f,y,c,g,a);g._subscriptions[a].push(f);d.resolve(f);delete g._subscribe_reqs[b]}else g._protocol_violation("SUBSCRIBED received for non-pending request ID "+b)};g._MESSAGE_MAP[33]=g._process_SUBSCRIBED;g._process_SUBSCRIBE_ERROR=
function(a){var b=a[2];b in g._subscribe_reqs?(a=new v(a[4],a[5],a[6]),g._subscribe_reqs[b][0].reject(a),delete g._subscribe_reqs[b]):g._protocol_violation("SUBSCRIBE-ERROR received for non-pending request ID "+b)};g._MESSAGE_MAP[8][32]=g._process_SUBSCRIBE_ERROR;g._process_UNSUBSCRIBED=function(a){var b=a[1];if(b in g._unsubscribe_reqs){a=g._unsubscribe_reqs[b];var c=a[0];a=a[1];if(a in g._subscriptions){var d=g._subscriptions[a];for(var m=0;m<d.length;++m)d[m].active=!1,d[m].on_unsubscribe.resolve();
delete g._subscriptions[a]}c.resolve(!0);delete g._unsubscribe_reqs[b]}else if(0===b)if(b=a[2],a=b.subscription,b=b.reason,a in g._subscriptions){d=g._subscriptions[a];for(m=0;m<d.length;++m)d[m].active=!1,d[m]._on_unsubscribe.resolve(b);delete g._subscriptions[a]}else g._protocol_violation("non-voluntary UNSUBSCRIBED received for non-existing subscription ID "+a);else g._protocol_violation("UNSUBSCRIBED received for non-pending request ID "+b)};g._MESSAGE_MAP[35]=g._process_UNSUBSCRIBED;g._process_UNSUBSCRIBE_ERROR=
function(a){var b=a[2];b in g._unsubscribe_reqs?(a=new v(a[4],a[5],a[6]),g._unsubscribe_reqs[b][0].reject(a),delete g._unsubscribe_reqs[b]):g._protocol_violation("UNSUBSCRIBE-ERROR received for non-pending request ID "+b)};g._MESSAGE_MAP[8][34]=g._process_UNSUBSCRIBE_ERROR;g._process_PUBLISHED=function(a){var b=a[1],c=a[2];b in g._publish_reqs?(a=g._publish_reqs[b][0],c=new C(c),a.resolve(c),delete g._publish_reqs[b]):g._protocol_violation("PUBLISHED received for non-pending request ID "+b)};g._MESSAGE_MAP[17]=
g._process_PUBLISHED;g._process_PUBLISH_ERROR=function(a){var b=a[2];b in g._publish_reqs?(a=new v(a[4],a[5],a[6]),g._publish_reqs[b][0].reject(a),delete g._publish_reqs[b]):g._protocol_violation("PUBLISH-ERROR received for non-pending request ID "+b)};g._MESSAGE_MAP[8][16]=g._process_PUBLISH_ERROR;g._process_EVENT=function(a){var b=a[1];if(b in g._subscriptions){var c=a[3],d=a[4]||[],m=a[5]||{},b=g._subscriptions[b];a=new u(a[2],c.topic||b[0]&&b[0].topic,c.publisher,c.publisher_authid,c.publisher_authrole,
c.retained||!1);for(c=0;c<b.length;++c){var f=b[c];try{f.handler(d,m,a,f)}catch(F){p.debug("Exception raised in event handler",F)}}}else g._protocol_violation("EVENT received for non-subscribed subscription ID "+b)};g._MESSAGE_MAP[36]=g._process_EVENT;g._process_REGISTERED=function(a){var b=a[1];a=a[2];if(b in g._register_reqs){var c=g._register_reqs[b],d=c[0],c=new x(c[1],c[2],c[3],g,a);g._registrations[a]=c;d.resolve(c);delete g._register_reqs[b]}else g._protocol_violation("REGISTERED received for non-pending request ID "+
b)};g._MESSAGE_MAP[65]=g._process_REGISTERED;g._process_REGISTER_ERROR=function(a){var b=a[2];b in g._register_reqs?(a=new v(a[4],a[5],a[6]),g._register_reqs[b][0].reject(a),delete g._register_reqs[b]):g._protocol_violation("REGISTER-ERROR received for non-pending request ID "+b)};g._MESSAGE_MAP[8][64]=g._process_REGISTER_ERROR;g._process_UNREGISTERED=function(a){var b=a[1];if(b in g._unregister_reqs){a=g._unregister_reqs[b];var c=a[0];a=a[1];a.id in g._registrations&&delete g._registrations[a.id];
a.active=!1;c.resolve();delete g._unregister_reqs[b]}else 0===b?(a=a[2],b=a.registration,c=a.reason,b in g._registrations?(a=g._registrations[b],a.active=!1,a._on_unregister.resolve(c),delete g._registrations[b]):g._protocol_violation("non-voluntary UNREGISTERED received for non-existing registration ID "+b)):g._protocol_violation("UNREGISTERED received for non-pending request ID "+b)};g._MESSAGE_MAP[67]=g._process_UNREGISTERED;g._process_UNREGISTER_ERROR=function(a){var b=a[2];b in g._unregister_reqs?
(a=new v(a[4],a[5],a[6]),g._unregister_reqs[b][0].reject(a),delete g._unregister_reqs[b]):g._protocol_violation("UNREGISTER-ERROR received for non-pending request ID "+b)};g._MESSAGE_MAP[8][66]=g._process_UNREGISTER_ERROR;g._process_RESULT=function(a){var b=a[1];if(b in g._call_reqs){var c=a[2],d=a[3]||[],m=a[4]||{};a=null;1<d.length||0<Object.keys(m).length?a=new D(d,m):0<d.length&&(a=d[0]);m=g._call_reqs[b];d=m[0];m=m[1];c.progress?m&&m.receive_progress&&d.notify(a):(d.resolve(a),delete g._call_reqs[b])}else g._protocol_violation("CALL-RESULT received for non-pending request ID "+
b)};g._MESSAGE_MAP[50]=g._process_RESULT;g._process_CALL_ERROR=function(a){var b=a[2];b in g._call_reqs?(a=new v(a[4],a[5],a[6]),g._call_reqs[b][0].reject(a),delete g._call_reqs[b]):g._protocol_violation("CALL-ERROR received for non-pending request ID "+b)};g._MESSAGE_MAP[8][48]=g._process_CALL_ERROR;g._process_INVOCATION=function(b){var c=b[1],m=b[2],f=b[3];if(m in g._registrations){var m=g._registrations[m],k=b[4]||[];b=b[5]||{};var u=null;f.receive_progress&&(u=function(a,b){var d=[70,c,{progress:!0}];
a=a||[];b=b||{};var m=Object.keys(b).length;if(a.length||m)d.push(a),m&&d.push(b);g._send_wamp(d)});f=new d(f.procedure||m.procedure,u,f.caller,f.caller_authid,f.caller_authrole);a.call(m.endpoint,k,b,f).then(function(a){var b=[70,c,{}];if(a instanceof D){var d=Object.keys(a.kwargs).length;if(a.args.length||d)b.push(a.args),d&&b.push(a.kwargs)}else b.push([a]);g._send_wamp(b)},function(a){var b=[8,68,c,{}];if(a instanceof v){b.push(a.error);var d=Object.keys(a.kwargs).length;if(a.args.length||d)b.push(a.args),
d&&b.push(a.kwargs)}else b.push("wamp.error.runtime_error"),b.push([a]);g._send_wamp(b)})}else g._protocol_violation("INVOCATION received for non-registered registration ID "+c)};g._MESSAGE_MAP[68]=g._process_INVOCATION;g._socket.onmessage=function(b){var c=b[0];if(g._id)if(6===c){if(g._goodbye_sent||g._send_wamp([6,{},"wamp.error.goodbye_and_out"]),g._id=null,g._realm=null,g._features=null,c=b[1],b=b[2],g.onleave)g.onleave(b,c)}else if(8===c){var d=b[1];if(d in g._MESSAGE_MAP[8])g._MESSAGE_MAP[c][d](b);
else g._protocol_violation("unexpected ERROR message with request_type "+d)}else if(c in g._MESSAGE_MAP)g._MESSAGE_MAP[c](b);else g._protocol_violation("unexpected message type "+c);else if(2===c){g._id=b[1];c=b[2];g._features={};if(c.roles.broker&&(g._features.subscriber={},g._features.publisher={},c.roles.broker.features)){for(d in f.publisher.features)g._features.publisher[d]=f.publisher.features[d]&&c.roles.broker.features[d];for(d in f.subscriber.features)g._features.subscriber[d]=f.subscriber.features[d]&&
c.roles.broker.features[d]}if(c.roles.dealer&&(g._features.caller={},g._features.callee={},c.roles.dealer.features)){for(d in f.caller.features)g._features.caller[d]=f.caller.features[d]&&c.roles.dealer.features[d];for(d in f.callee.features)g._features.callee[d]=f.callee.features[d]&&c.roles.dealer.features[d]}if(g.onjoin)g.onjoin(b[2])}else if(3===c){if(c=b[1],b=b[2],g.onleave)g.onleave(b,c)}else 4===c?g._onchallenge?a.call(g._onchallenge,g,b[1],b[2]).then(function(a){g._send_wamp([5,a,{}])},function(a){p.debug("onchallenge() raised:",
a);g._send_wamp([3,{message:"sorry, I cannot authenticate (onchallenge handler raised an exception)"},"wamp.error.cannot_authenticate"]);g._socket.close(1E3)}):(p.debug("received WAMP challenge, but no onchallenge() handler set"),b=[3,{message:"sorry, I cannot authenticate (no onchallenge handler set)"},"wamp.error.cannot_authenticate"],g._send_wamp(b),g._socket.close(1E3)):g._protocol_violation("unexpected message type "+c)};g._created="performance"in c&&"now"in performance?performance.now():Date.now()};
Object.defineProperty(w.prototype,"defer",{get:function(){return this._defer}});Object.defineProperty(w.prototype,"id",{get:function(){return this._id}});Object.defineProperty(w.prototype,"realm",{get:function(){return this._realm}});Object.defineProperty(w.prototype,"isOpen",{get:function(){return null!==this.id}});Object.defineProperty(w.prototype,"features",{get:function(){return this._features}});Object.defineProperty(w.prototype,"caller_disclose_me",{get:function(){return this._caller_disclose_me},
set:function(a){this._caller_disclose_me=a}});Object.defineProperty(w.prototype,"publisher_disclose_me",{get:function(){return this._publisher_disclose_me},set:function(a){this._publisher_disclose_me=a}});Object.defineProperty(w.prototype,"subscriptions",{get:function(){for(var a=Object.keys(this._subscriptions),b=[],c=0;c<a.length;++c)b.push(this._subscriptions[a[c]]);return b}});Object.defineProperty(w.prototype,"registrations",{get:function(){for(var a=Object.keys(this._registrations),b=[],c=0;c<
a.length;++c)b.push(this._registrations[a[c]]);return b}});w.prototype.log=function(){if("console"in c){if(this._id&&this._created){var a="performance"in c&&"now"in performance?performance.now()-this._created:Date.now()-this._created;a="WAMP session "+this._id+" on '"+this._realm+"' at "+Math.round(1E3*a)/1E3+" ms"}else a="WAMP session";if("group"in console){console.group(a);for(a=0;a<arguments.length;a+=1)console.log(arguments[a]);console.groupEnd()}else{var b=[a+": "];for(a=0;a<arguments.length;a+=
1)b.push(arguments[a]);console.log.apply(console,b)}}};w.prototype.join=function(a,c,d,g){b.assert("string"===typeof a,"Session.join: <realm> must be a string");b.assert(!c||Array.isArray(c),"Session.join: <authmethods> must be an array []");b.assert(!d||"string"===typeof d,"Session.join: <authid> must be a string");if(this.isOpen)throw"session already open";this._goodbye_sent=!1;this._realm=a;var m={};m.roles=f;c&&(m.authmethods=c);d&&(m.authid=d);g&&(m.authextra=g);this._send_wamp([1,a,m])};w.prototype.leave=
function(a,c){b.assert(!a||"string"===typeof a,"Session.leave: <reason> must be a string");b.assert(!c||"string"===typeof c,"Session.leave: <message> must be a string");if(!this.isOpen)throw"session not open";a||(a="wamp.close.normal");var d={};c&&(d.message=c);this._send_wamp([6,d,a]);this._goodbye_sent=!0};w.prototype.call=function(a,c,d,g){b.assert("string"===typeof a,"Session.call: <procedure> must be a string");b.assert(!c||Array.isArray(c),"Session.call: <args> must be an array []");b.assert(!d||
d instanceof Object,"Session.call: <kwargs> must be an object {}");b.assert(!g||g instanceof Object,"Session.call: <options> must be an object {}");if(!this.isOpen)throw"session not open";g=g||{};void 0===g.disclose_me&&this._caller_disclose_me&&(g.disclose_me=!0);var m=this._defer(),f=this._socket.serializer.newid();this._call_reqs[f]=[m,g];a=[48,f,g,this.resolve(a)];c?(a.push(c),d&&a.push(d)):d&&(a.push([]),a.push(d));this._send_wamp(a);return m.promise.then?m.promise:m};w.prototype.publish=function(a,
c,d,g){b.assert("string"===typeof a,"Session.publish: <topic> must be a string");b.assert(!c||Array.isArray(c),"Session.publish: <args> must be an array []");b.assert(!d||d instanceof Object,"Session.publish: <kwargs> must be an object {}");b.assert(!g||g instanceof Object,"Session.publish: <options> must be an object {}");if(!this.isOpen)throw"session not open";g=g||{};void 0===g.disclose_me&&this._publisher_disclose_me&&(g.disclose_me=!0);var m=null,f=this._socket.serializer.newid();g.acknowledge&&
(m=this._defer(),this._publish_reqs[f]=[m,g]);a=[16,f,g,this.resolve(a)];c?(a.push(c),d&&a.push(d)):d&&(a.push([]),a.push(d));this._send_wamp(a);if(m)return m.promise.then?m.promise:m};w.prototype.subscribe=function(a,c,d){b.assert("string"===typeof a,"Session.subscribe: <topic> must be a string");b.assert("function"===typeof c,"Session.subscribe: <handler> must be a function");b.assert(!d||d instanceof Object,"Session.subscribe: <options> must be an object {}");if(!this.isOpen)throw"session not open";
var g=this._socket.serializer.newid(),m=this._defer();this._subscribe_reqs[g]=[m,a,c,d];c=[32,g];d?c.push(d):c.push({});c.push(this.resolve(a));this._send_wamp(c);return m.promise.then?m.promise:m};w.prototype.register=function(a,c,d){b.assert("string"===typeof a,"Session.register: <procedure> must be a string");b.assert("function"===typeof c,"Session.register: <endpoint> must be a function");b.assert(!d||d instanceof Object,"Session.register: <options> must be an object {}");if(!this.isOpen)throw"session not open";
var g=this._socket.serializer.newid(),m=this._defer();this._register_reqs[g]=[m,a,c,d];c=[64,g];d?c.push(d):c.push({});c.push(this.resolve(a));this._send_wamp(c);return m.promise.then?m.promise:m};w.prototype.unsubscribe=function(a){b.assert(a instanceof m,"Session.unsubscribe: <subscription> must be an instance of class autobahn.Subscription");if(!this.isOpen)throw"session not open";if(!(a.active&&a.id in this._subscriptions))throw"subscription not active";var c=this._subscriptions[a.id],d=c.indexOf(a);
if(-1===d)throw"subscription not active";c.splice(d,1);a.active=!1;d=this._defer();c.length?d.resolve(!1):(c=this._socket.serializer.newid(),this._unsubscribe_reqs[c]=[d,a.id],this._send_wamp([34,c,a.id]));return d.promise.then?d.promise:d};w.prototype.unregister=function(a){b.assert(a instanceof x,"Session.unregister: <registration> must be an instance of class autobahn.Registration");if(!this.isOpen)throw"session not open";if(!(a.active&&a.id in this._registrations))throw"registration not active";
var c=this._socket.serializer.newid(),d=this._defer();this._unregister_reqs[c]=[d,a];this._send_wamp([66,c,a.id]);return d.promise.then?d.promise:d};w.prototype.prefix=function(a,c){b.assert("string"===typeof a,"Session.prefix: <prefix> must be a string");b.assert(!c||"string"===typeof c,"Session.prefix: <uri> must be a string or falsy");c?this._prefixes[a]=c:a in this._prefixes&&delete this._prefixes[a]};w.prototype.resolve=function(a){b.assert("string"===typeof a,"Session.resolve: <curie> must be a string");
var c=a.indexOf(":");if(0<=c){var d=a.substring(0,c);return d in this._prefixes?this._prefixes[d]+"."+a.substring(c+1):a}return a};k.Session=w;k.Invocation=d;k.Event=u;k.Result=D;k.Error=v;k.Subscription=m;k.Registration=x;k.Publication=C}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./log.js":6,"./util.js":20,when:void 0,"when/function":void 0}],17:[function(n,q,k){function c(b){a.assert(void 0!==b.url,"options.url missing");
a.assert("string"===typeof b.url,"options.url must be a string");this._options=b}n("when");var a=n("../util.js"),p=n("../log.js"),b=n("../serializer.js");c.prototype.type="longpoll";c.prototype.create=function(){var c=this;p.debug("longpoll.Factory.create");var d={protocol:void 0};d.serializer=new b.JSONSerializer;d.send=void 0;d.close=void 0;d.onmessage=function(){};d.onopen=function(){};d.onclose=function(){};d.info={type:"longpoll",url:null,protocol:"wamp.2.json"};d._run=function(){var b=null,
f=!1,k=c._options.request_timeout||12E3;a.http_post(c._options.url+"/open",JSON.stringify({protocols:["wamp.2.json"]}),k).then(function(m){function u(){p.debug("longpoll.Transport: polling for message ...");a.http_post(n+"/receive",null,k).then(function(a){a&&(a=JSON.parse(a),p.debug("longpoll.Transport: message received",a),d.onmessage(a));f||u()},function(a){p.debug("longpoll.Transport: could not receive message",a.code,a.text);f=!0;d.onclose({code:1001,reason:"transport receive failure (HTTP/POST status "+
a.code+" - '"+a.text+"')",wasClean:!1})})}b=JSON.parse(m);var n=c._options.url+"/"+b.transport;d.info.url=n;p.debug("longpoll.Transport: open",b);d.close=function(b,c){if(f)throw"transport is already closing";f=!0;a.http_post(n+"/close",null,k).then(function(){p.debug("longpoll.Transport: transport closed");d.onclose({code:1E3,reason:"transport closed",wasClean:!0})},function(a){p.debug("longpoll.Transport: could not close transport",a.code,a.text)})};d.send=function(b){if(f)throw"transport is closing or closed already";
p.debug("longpoll.Transport: sending message ...",b);b=JSON.stringify(b);a.http_post(n+"/send",b,k).then(function(){p.debug("longpoll.Transport: message sent")},function(a){p.debug("longpoll.Transport: could not send message",a.code,a.text);f=!0;d.onclose({code:1001,reason:"transport send failure (HTTP/POST status "+a.code+" - '"+a.text+"')",wasClean:!1})})};u();d.onopen()},function(a){p.debug("longpoll.Transport: could not open transport",a.code,a.text);f=!0;d.onclose({code:1001,reason:"transport open failure (HTTP/POST status "+
a.code+" - '"+a.text+"')",wasClean:!1})})};d._run();return d};k.Factory=c},{"../log.js":6,"../serializer.js":15,"../util.js":20,when:void 0}],18:[function(n,q,k){(function(c,a){function p(a){a.protocols?f.assert(Array.isArray(a.protocols),"options.protocols must be an array"):a.protocols=["wamp.2.json"];a.rawsocket_max_len_exp=a.rawsocket_max_len_exp||24;this._options=a}function b(b,c){this._options={_peer_serializer:null,_peer_max_len_exp:0};this._options=f.defaults(this._options,c,this.DEFAULT_OPTIONS);
f.assert(this._options.serializer in this.SERIALIZERS,"Unsupported serializer: "+this._options.serializer);f.assert(9<=this._options.max_len_exp&&36>=this._options.max_len_exp,"Message length out of bounds [9, 36]: "+this._options.max_len_exp);f.assert(!this._options.autoping||Number.isInteger(this._options.autoping)&&0<=this._options.autoping,"Autoping interval must be positive");f.assert(!this._options.ping_timeout||Number.isInteger(this._options.ping_timeout)&&0<=this._options.ping_timeout,"Ping timeout duration must be positive");
f.assert(!this._options.packet_timeout||Number.isInteger(this._options.packet_timeout)&&0<=this._options.packet_timeout,"Packet timeout duration must be positive");f.assert(!this._options.autoping||!this._options.ping_timeout||this._options.autoping>this._options.ping_timeout,"Autoping interval ("+this._options.autoping+") must be lower than ping timeout ("+this._options.ping_timeout+")");this._ping_interval=this._ping_payload=this._ping_timeout=null;this._status=this.STATUS.UNINITIATED;this._stream=
b;this._emitter=new q;this._buffer=new a(4);this._msgLen=this._bufferLen=0;var d=this;this._stream.on("data",function(a){d._read(a)});this._stream.on("connect",function(){d._handshake()});["close","drain","end","error","timeout"].forEach(function(a){d._stream.on(a,function(b){d._emitter.emit(a,b)})})}var f=n("../util.js"),d=n("../log.js"),u=n("../serializer.js"),q=n("events").EventEmitter;p.prototype.type="rawsocket";p.prototype.create=function(){var a=this,f={protocol:void 0};f.serializer=new u.JSONSerializer;
f.send=void 0;f.close=void 0;f.onmessage=function(){};f.onopen=function(){};f.onclose=function(){};f.info={type:"rawsocket",url:null,protocol:"wamp.2.json"};if(c.process&&c.process.versions.node)(function(){var c=n("net");if(a._options.path)connectionOptions={path:a._options.path,allowHalfOpen:!0};else if(a._options.port)connectionOptions={port:a._options.port||8E3,host:a._options.host||"localhost",allowHalfOpen:!0};else throw"You must specify a host/port combination or a unix socket path to connect to";
c=c.connect(connectionOptions);var m=new b(c,{serializer:"json",max_len_exp:a._options.rawsocket_max_len_exp});m.on("connect",function(a){d.debug("RawSocket transport negociated");f.onopen(a)});m.on("data",function(a){d.debug("RawSocket transport received",a);f.onmessage(a)});m.on("close",function(a){d.debug("RawSocket transport closed");f.onclose({code:999,reason:"",wasClean:!a})});m.on("error",function(a){d.debug("RawSocket transport error",a)});f.close=function(a,b){d.debug("RawSocket transport closing",
a,b);m.close()};f.send=function(a){d.debug("RawSocket transport sending",a);m.write(a)}})();else throw"No RawSocket support in browser";return f};b.prototype._MAGIC_BYTE=127;b.prototype.SERIALIZERS={json:1};b.prototype.STATUS={CLOSED:-1,UNINITIATED:0,NEGOCIATING:1,NEGOCIATED:2,RXHEAD:3,RXDATA:4,RXPING:5,RXPONG:6};b.prototype.ERRORS={0:"illegal (must not be used)",1:"serializer unsupported",2:"maximum message length unacceptable",3:"use of reserved bits (unsupported feature)",4:"maximum connection count reached"};
b.prototype.MSGTYPES={WAMP:0,PING:1,PONG:2};b.prototype.DEFAULT_OPTIONS={fail_on_ping_timeout:!0,strict_pong:!0,ping_timeout:2E3,autoping:0,max_len_exp:24,serializer:"json",packet_timeout:2E3};b.prototype.close=function(){this._status=this.STATUS.CLOSED;this._stream.end();return this.STATUS.CLOSED};b.prototype.write=function(b,c,d){c=void 0===c?0:c;c===this.MSGTYPES.WAMP&&(b=JSON.stringify(b));var m=a.byteLength(b,"utf8");if(m>Math.pow(2,this._options._peer_max_len_exp))this._emitter.emit("error",
new v("Frame too big"));else{var f=new a(m+4);f.writeUInt8(c,0);f.writeUIntBE(m,1,3);f.write(b,4);this._stream.write(f,d)}};b.prototype.ping=function(a){a=a||255;if(Number.isInteger(a))for(var b=Math.max(1,a),c=0;c<b;c++)a+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&~\"#'{([-|`_\\^@)]=},?;.:/!*$<>".charAt(92*Math.random()|0);this._ping_payload=a;return this.write(a,this.MSGTYPES.PING,this._setupPingTimeout.bind(this))};b.prototype._setupPingTimeout=function(){this._options.ping_timeout&&
(this._ping_timeout=setTimeout(this._onPingTimeout.bind(this),this._options.ping_timeout))};b.prototype._clearPingTimeout=function(){this._ping_timeout&&(clearTimeout(this._ping_timeout),this._ping_timeout=null)};b.prototype._setupAutoPing=function(){this._clearAutoPing();this._options.autoping&&(this._autoping_interval=setInterval(this.ping.bind(this),this._options.autoping))};b.prototype._clearAutoPing=function(){this._autoping_interval&&(clearInterval(this._autoping_interval),this._autoping_interval=
null)};b.prototype._onPingTimeout=function(){this._emitter.emit("error",new v("PING timeout"));this._options.fail_on_ping_timeout&&this.close()};b.prototype._read=function(a){switch(this._status){case this.STATUS.CLOSED:case this.STATUS.UNINITIATED:this._emitter.emit("error",v("Unexpected packet"));break;case this.STATUS.NEGOCIATING:var b=this._handleHandshake;var c=4;break;case this.STATUS.NEGOCIATED:case this.STATUS.RXHEAD:this._status=this.STATUS.RXHEAD;b=this._handleHeaderPacket;c=4;break;case this.STATUS.RXDATA:b=
this._handleDataPacket;c=this._msgLen;break;case this.STATUS.RXPING:b=this._handlePingPacket;c=this._msgLen;break;case this.STATUS.RXPONG:b=this._handlePongPacket,c=this._msgLen}if(a=this._splitBytes(a,c))this._status=b.call(this,a[0]),0<a[1].length&&this._read(a[1])};b.prototype._handshake=function(){if(this._status!==this.STATUS.UNINITIATED)throw"Handshake packet already sent";var b=new a(4);b.writeUInt8(this._MAGIC_BYTE,0);b.writeUInt8(this._options.max_len_exp-9<<4|this.SERIALIZERS[this._options.serializer],
1);b.writeUInt8(0,2);b.writeUInt8(0,3);this._stream.write(b);this._status=this.STATUS.NEGOCIATING};b.prototype._splitBytes=function(b,c){c!==this._buffer.length&&(this._buffer=new a(c),this._bufferLen=0);b.copy(this._buffer,this._bufferLen);if(this._bufferLen+b.length<c)return this._bufferLen+=b.length,null;var d=this._buffer.slice(),m=b.slice(c-this._bufferLen);this._bufferLen=0;return[d,m]};b.prototype._handleHandshake=function(a){if(a[0]!==this._MAGIC_BYTE)return this._emitter.emit("error",new v("Invalid magic byte. Expected 0x"+
this._MAGIC_BYTE.toString(16)+", got 0x"+a[0].toString(16))),this.close();if(0===(a[1]&15))return a=a[1]>>4,this._emitter.emit("error",new v("Peer failed handshake: "+(this.ERRORS[a]||"0x"+a.toString(16)))),this.close();this._options._peer_max_len_exp=(a[1]>>4)+9;this._options._peer_serializer=a[1]&15;if(this._options._peer_serializer!==this.SERIALIZERS.json)return this._emitter.emit("error",new v("Unsupported serializer: 0x"+this._options._peer_serializer.toString(16))),this.close();this._emitter.emit("connect");
this._setupAutoPing();return this.STATUS.NEGOCIATED};b.prototype._handleHeaderPacket=function(a){var b=a[0]&15;this._msgLen=a.readUIntBE(1,3);switch(b){case this.MSGTYPES.WAMP:return this.STATUS.RXDATA;case this.MSGTYPES.PING:return this.STATUS.RXPING;case this.MSGTYPES.PONG:return this.STATUS.RXPONG;default:return this._emitter.emit("error",new v("Invalid frame type: 0x"+b.toString(16))),this.close()}};b.prototype._handleDataPacket=function(a){try{var b=JSON.parse(a.toString("utf8"))}catch(C){return this._emitter.emit("error",
new v("Invalid JSON frame")),this.STATUS.RXHEAD}this._emitter.emit("data",b);return this.STATUS.RXHEAD};b.prototype._handlePingPacket=function(a){this.write(a.toString("utf8"),this.MSGTYPES.PONG);return this.STATUS.RXHEAD};b.prototype._handlePongPacket=function(a){this._clearPingTimeout();return this._options.strict_pong&&this._ping_payload!==a.toString("utf8")?(this._emitter.emit("error",new v("PONG response payload doesn't match PING.")),this.close()):this.STATUS.RXHEAD};b.prototype.on=function(a,
b){return this._emitter.on(a,b)};b.prototype.once=function(a,b){return this._emitter.once(a,b)};b.prototype.removeListener=function(a,b){return this._emitter.removeListener(a,b)};var v=k.ProtocolError=function(a){Error.apply(this,Array.prototype.splice.call(arguments));Error.captureStackTrace(this,this.constructor);this.message=a;this.name="ProtocolError"};v.prototype=Object.create(Error.prototype);k.Factory=p;k.Protocol=b}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:
"undefined"!==typeof window?window:{},n("buffer").Buffer)},{"../log.js":6,"../serializer.js":15,"../util.js":20,buffer:25,events:26,net:22}],19:[function(n,q,k){(function(c){function a(a){p.assert(void 0!==a.url,"options.url missing");p.assert("string"===typeof a.url,"options.url must be a string");a.serializers?p.assert(Array.isArray(a.serializers),"options.serializers must be an array"):(a.serializers=[new f.JSONSerializer],f.MsgpackSerializer&&a.serializers.push(new f.MsgpackSerializer));a.protocols?
p.assert(Array.isArray(a.protocols),"options.protocols must be an array"):(a.protocols=[],a.serializers.forEach(function(b){a.protocols.push("wamp.2."+b.SERIALIZER_ID)}));this._options=a}var p=n("../util.js"),b=n("../log.js"),f=n("../serializer.js");a.prototype.type="websocket";a.prototype.create=function(){var a=this,f={protocol:void 0,serializer:void 0,send:void 0,close:void 0,onmessage:function(){},onopen:function(){},onclose:function(){}};f.info={type:"websocket",url:a._options.url,protocol:null};
c.process&&c.process.versions.node?function(){var b=n("ws");if(a._options.protocols){var c=a._options.protocols;Array.isArray(c)&&(c=c.join(","));var d=new b(a._options.url,{protocol:c})}else d=new b(a._options.url);f.send=function(a){a=f.serializer.serialize(a);d.send(a,{binary:f.serializer.BINARY})};f.close=function(a,b){d.close()};d.on("open",function(){var b=d.protocol.split(".")[2],c;for(c in a._options.serializers){var m=a._options.serializers[c];if(m.SERIALIZER_ID==b){f.serializer=m;break}}f.info.protocol=
d.protocol;f.onopen()});d.on("message",function(a,b){var c=f.serializer.unserialize(a);f.onmessage(c)});d.on("close",function(a,b){f.onclose({code:a,reason:b,wasClean:1E3===a})});d.on("error",function(a){f.onclose({code:1006,reason:"",wasClean:!1})})}():function(){if("WebSocket"in c){var d=a._options.protocols?new c.WebSocket(a._options.url,a._options.protocols):new c.WebSocket(a._options.url);d.binaryType="arraybuffer"}else if("MozWebSocket"in c)d=a._options.protocols?new c.MozWebSocket(a._options.url,
a._options.protocols):new c.MozWebSocket(a._options.url);else throw"browser does not support WebSocket or WebSocket in Web workers";d.onmessage=function(a){b.debug("WebSocket transport receive",a.data);a=f.serializer.unserialize(a.data);f.onmessage(a)};d.onopen=function(){var b=d.protocol.split(".")[2],c;for(c in a._options.serializers){var k=a._options.serializers[c];if(k.SERIALIZER_ID==b){f.serializer=k;break}}f.info.protocol=d.protocol;f.onopen()};d.onclose=function(a){f.onclose({code:a.code,reason:a.message,
wasClean:a.wasClean})};f.send=function(a){a=f.serializer.serialize(a);b.debug("WebSocket transport send",a);d.send(a)};f.close=function(a,b){d.close(a,b)}}();return f};k.Factory=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../log.js":6,"../serializer.js":15,"../util.js":20,ws:24}],20:[function(n,q,k){(function(c){var a=n("./log.js"),p=n("when"),b=function(a,f){if(!a){if(b.useDebugger||"AUTOBAHN_DEBUG"in c&&AUTOBAHN_DEBUG)debugger;
throw Error(f||"Assertion failed!");}},f=function(){var a;if(0===arguments.length)return{};var b=arguments[0],c=!1,k=arguments.length;"boolean"===typeof arguments[k-1]&&(c=arguments[k-1],--k);var m=function(d){var m=a[d];d in b?c&&"object"===typeof m&&"object"===typeof b[d]&&f(b[d],m):b[d]=m},p=1;for(;p<k;p++)if(a=arguments[p]){if("object"!==typeof a)throw Error("Expected argument at index "+p+" to be an object");Object.keys(a).forEach(m)}return b};k.rand_normal=function(a,b){do{var c=2*Math.random()-
1;var d=2*Math.random()-1;d=c*c+d*d}while(1<=d||0==d);return(a||0)+c*Math.sqrt(-2*Math.log(d)/d)*(b||1)};k.assert=b;k.http_post=function(b,c,f){a.debug("new http_post request",b,c,f);var d=p.defer(),m=new XMLHttpRequest;m.withCredentials=!0;m.onreadystatechange=function(){if(4===m.readyState){var a=1223===m.status?204:m.status;200===a&&d.resolve(m.responseText);if(204===a)d.resolve();else{var b=null;try{b=m.statusText}catch(w){}d.reject({code:a,text:b})}}};m.open("POST",b,!0);m.setRequestHeader("Content-type",
"application/json; charset=utf-8");0<f&&(m.timeout=f,m.ontimeout=function(){d.reject({code:501,text:"request timeout"})});c?m.send(c):m.send();return d.promise.then?d.promise:d};k.defaults=f}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./log.js":6,when:void 0}],21:[function(n,q,k){q.exports={name:"autobahn",version:"17.5.1",description:"An implementation of The Web Application Messaging Protocol (WAMP).",main:"index.js",scripts:{test:"nodeunit test/test.js"},
engines:{node:">= 4.2.6"},dependencies:{"crypto-js":">= 3.1.8","int64-buffer":">= 0.1.9","msgpack-lite":">= 0.1.26",cbor:">= 3.0.0",tweetnacl:">= 0.14.3",when:">= 3.7.7",ws:">= 1.1.4"},optionalDependencies:{bufferutil:">= 1.2.1","utf-8-validate":">= 1.2.1"},devDependencies:{browserify:">= 13.1.1","deep-equal":">= 1.0.1","google-closure-compiler":"^20170218.0.0",nodeunit:">= 0.10.2"},browser:{ws:!1,"lib/transport/rawsocket.js":!1},repository:{type:"git",url:"git://github.com/crossbario/autobahn-js.git"},
keywords:["WAMP","WebSocket","RPC","PubSub"],author:"Crossbar.io Technologies GmbH",license:"MIT"}},{}],22:[function(n,q,k){},{}],23:[function(n,q,k){function c(a){var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function a(a,b,c){for(var d=[],f=b;f<c;f+=3)b=(a[f]<<16)+(a[f+1]<<8)+a[f+2],d.push(p[b>>18&63]+p[b>>12&63]+p[b>>6&63]+p[b&63]);return d.join("")}k.byteLength=function(a){return 3*a.length/4-c(a)};k.toByteArray=function(a){var d=
a.length;var k=c(a);var p=new f(3*d/4-k);var m=0<k?d-4:d;var n=0;for(d=0;d<m;d+=4){var q=b[a.charCodeAt(d)]<<18|b[a.charCodeAt(d+1)]<<12|b[a.charCodeAt(d+2)]<<6|b[a.charCodeAt(d+3)];p[n++]=q>>16&255;p[n++]=q>>8&255;p[n++]=q&255}2===k?(q=b[a.charCodeAt(d)]<<2|b[a.charCodeAt(d+1)]>>4,p[n++]=q&255):1===k&&(q=b[a.charCodeAt(d)]<<10|b[a.charCodeAt(d+1)]<<4|b[a.charCodeAt(d+2)]>>2,p[n++]=q>>8&255,p[n++]=q&255);return p};k.fromByteArray=function(b){for(var c=b.length,d=c%3,f="",m=[],k=0,n=c-d;k<n;k+=16383)m.push(a(b,
k,k+16383>n?n:k+16383));1===d?(b=b[c-1],f+=p[b>>2],f+=p[b<<4&63],f+="=="):2===d&&(b=(b[c-2]<<8)+b[c-1],f+=p[b>>10],f+=p[b>>4&63],f+=p[b<<2&63],f+="=");m.push(f);return m.join("")};var p=[],b=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;for(n=0;64>n;++n)p[n]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n],b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(n)]=n;b[45]=62;b[95]=63},{}],24:[function(n,q,k){arguments[4][22][0].apply(k,arguments)},
{dup:22}],25:[function(n,q,k){function c(b){if(b>K)throw new RangeError("Invalid typed array length");b=new Uint8Array(b);b.__proto__=a.prototype;return b}function a(a,b,c){if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return f(a)}return p(a,b,c)}function p(b,h,l){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if(b instanceof ArrayBuffer){if(0>h||b.byteLength<h)throw new RangeError("'offset' is out of bounds");
if(b.byteLength<h+(l||0))throw new RangeError("'length' is out of bounds");b=void 0===h&&void 0===l?new Uint8Array(b):void 0===l?new Uint8Array(b,h):new Uint8Array(b,h,l);b.__proto__=a.prototype;return b}if("string"===typeof b){var e=h;if("string"!==typeof e||""===e)e="utf8";if(!a.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');h=v(b,e)|0;l=c(h);b=l.write(b,e);b!==h&&(l=l.slice(0,b));return l}return u(b)}function b(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');
if(0>a)throw new RangeError('"size" argument must not be negative');}function f(a){b(a);return c(0>a?0:D(a)|0)}function d(a){for(var b=0>a.length?0:D(a.length)|0,e=c(b),d=0;d<b;d+=1)e[d]=a[d]&255;return e}function u(b){if(a.isBuffer(b)){var e=D(b.length)|0,l=c(e);if(0===l.length)return l;b.copy(l,0,0,e);return l}if(b){if(ArrayBuffer.isView(b)||"length"in b)return(e="number"!==typeof b.length)||(e=b.length,e=e!==e),e?c(0):d(b);if("Buffer"===b.type&&Array.isArray(b.data))return d(b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function D(a){if(a>=K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");return a|0}function v(b,c){if(a.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||b instanceof ArrayBuffer)return b.byteLength;"string"!==typeof b&&(b=""+b);var e=b.length;if(0===e)return 0;for(var h=!1;;)switch(c){case "ascii":case "latin1":case "binary":return e;case "utf8":case "utf-8":case void 0:return L(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
e;case "hex":return e>>>1;case "base64":return F.toByteArray(N(b)).length;default:if(h)return L(b).length;c=(""+c).toLowerCase();h=!0}}function m(a,b,c){var e=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;e="";for(c=a;c<b;++c)a=e,e=this[c],e=16>e?"0"+e.toString(16):e.toString(16),e=a+e;return e;case "utf8":case "utf-8":return z(this,
b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?F.fromByteArray(this):F.fromByteArray(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(e)throw new TypeError("Unknown encoding: "+
a);a=(a+"").toLowerCase();e=!0}}function x(a,b,c){var e=a[b];a[b]=a[c];a[c]=e}function C(b,c,l,d,f){if(0===b.length)return-1;"string"===typeof l?(d=l,l=0):2147483647<l?l=2147483647:-2147483648>l&&(l=-2147483648);l=+l;isNaN(l)&&(l=f?0:b.length-1);0>l&&(l=b.length+l);if(l>=b.length){if(f)return-1;l=b.length-1}else if(0>l)if(f)l=0;else return-1;"string"===typeof c&&(c=a.from(c,d));if(a.isBuffer(c))return 0===c.length?-1:w(b,c,l,d,f);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?
f?Uint8Array.prototype.indexOf.call(b,c,l):Uint8Array.prototype.lastIndexOf.call(b,c,l):w(b,[c],l,d,f);throw new TypeError("val must be string, number or Buffer");}function w(a,b,c,d,f){function e(a,b){return 1===h?a[b]:a.readUInt16BE(b*h)}var h=1,l=a.length,g=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;h=2;l/=2;g/=2;c/=2}if(f)for(d=-1;c<l;c++)if(e(a,c)===e(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===
g)return d*h}else-1!==d&&(c-=c-d),d=-1;else for(c+g>l&&(c=l-g);0<=c;c--){l=!0;for(d=0;d<g;d++)if(e(a,c+d)!==e(b,d)){l=!1;break}if(l)return c}return-1}function z(a,b,c){c=Math.min(a.length,c);for(var e=[];b<c;){var h=a[b],l=null,d=239<h?4:223<h?3:191<h?2:1;if(b+d<=c)switch(d){case 1:128>h&&(l=h);break;case 2:var f=a[b+1];128===(f&192)&&(h=(h&31)<<6|f&63,127<h&&(l=h));break;case 3:f=a[b+1];var g=a[b+2];128===(f&192)&&128===(g&192)&&(h=(h&15)<<12|(f&63)<<6|g&63,2047<h&&(55296>h||57343<h)&&(l=h));break;
case 4:f=a[b+1];g=a[b+2];var m=a[b+3];128===(f&192)&&128===(g&192)&&128===(m&192)&&(h=(h&15)<<18|(f&63)<<12|(g&63)<<6|m&63,65535<h&&1114112>h&&(l=h))}null===l?(l=65533,d=1):65535<l&&(l-=65536,e.push(l>>>10&1023|55296),l=56320|l&1023);e.push(l);b+=d}a=e.length;if(a<=P)e=String.fromCharCode.apply(String,e);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,e.slice(b,b+=P));e=c}return e}function A(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");
}function B(b,c,l,d,f,g){if(!a.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>f||c<g)throw new RangeError('"value" argument is out of bounds');if(l+d>b.length)throw new RangeError("Index out of range");}function g(a,b,c,d,f,g){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function y(a,b,c,d,f){b=+b;c>>>=0;f||g(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(a,b,c,d,23,4);return c+4}function M(a,
b,c,d,f){b=+b;c>>>=0;f||g(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(a,b,c,d,52,8);return c+8}function N(a){a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");a=a.replace(R,"");if(2>a.length)return"";for(;0!==a.length%4;)a+="=";return a}function L(a,b){b=b||Infinity;for(var c,e=a.length,h=null,d=[],f=0;f<e;++f){c=a.charCodeAt(f);if(55295<c&&57344>c){if(!h){if(56319<c){-1<(b-=3)&&d.push(239,191,189);continue}else if(f+1===e){-1<(b-=3)&&d.push(239,191,189);continue}h=c;continue}if(56320>
c){-1<(b-=3)&&d.push(239,191,189);h=c;continue}c=(h-55296<<10|c-56320)+65536}else h&&-1<(b-=3)&&d.push(239,191,189);h=null;if(128>c){if(0>--b)break;d.push(c)}else if(2048>c){if(0>(b-=2))break;d.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;d.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;d.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return d}function O(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);
return b}function G(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}var F=n("base64-js"),J=n("ieee754");k.Buffer=a;k.SlowBuffer=function(b){+b!=b&&(b=0);return a.alloc(+b)};k.INSPECT_MAX_BYTES=50;var K=2147483647;k.kMaxLength=K;a.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()}catch(h){return!1}}();a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==
typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");"undefined"!==typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});a.poolSize=8192;a.from=function(a,b,c){return p(a,b,c)};a.prototype.__proto__=Uint8Array.prototype;a.__proto__=Uint8Array;a.alloc=function(a,h,d){b(a);a=0>=a?
c(a):void 0!==h?"string"===typeof d?c(a).fill(h,d):c(a).fill(h):c(a);return a};a.allocUnsafe=function(a){return f(a)};a.allocUnsafeSlow=function(a){return f(a)};a.isBuffer=function(a){return null!=a&&!0===a._isBuffer};a.compare=function(b,c){if(!a.isBuffer(b)||!a.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var e=b.length,h=c.length,d=0,f=Math.min(e,h);d<f;++d)if(b[d]!==c[d]){e=b[d];h=c[d];break}return e<h?-1:h<e?1:0};a.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};a.concat=function(b,c){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return a.alloc(0);var e;if(void 0===c)for(e=c=0;e<b.length;++e)c+=b[e].length;var h=a.allocUnsafe(c),d=0;for(e=0;e<b.length;++e){var f=b[e];if(!a.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(h,d);d+=f.length}return h};a.byteLength=v;a.prototype._isBuffer=!0;a.prototype.swap16=function(){var a=this.length;if(0!==a%
2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)x(this,b,b+1);return this};a.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)x(this,b,b+3),x(this,b+1,b+2);return this};a.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)x(this,b,b+7),x(this,b+1,b+6),x(this,b+2,b+5),x(this,
b+3,b+4);return this};a.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?z(this,0,a):m.apply(this,arguments)};a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===a.compare(this,b)};a.prototype.inspect=function(){var a="",b=k.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... "));return"<Buffer "+a+">"};a.prototype.compare=function(b,c,
d,f,g){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===d&&(d=b?b.length:0);void 0===f&&(f=0);void 0===g&&(g=this.length);if(0>c||d>b.length||0>f||g>this.length)throw new RangeError("out of range index");if(f>=g&&c>=d)return 0;if(f>=g)return-1;if(c>=d)return 1;c>>>=0;d>>>=0;f>>>=0;g>>>=0;if(this===b)return 0;var e=g-f,h=d-c,l=Math.min(e,h);f=this.slice(f,g);b=b.slice(c,d);for(c=0;c<l;++c)if(f[c]!==b[c]){e=f[c];h=b[c];break}return e<h?-1:h<e?1:0};a.prototype.includes=
function(a,b,c){return-1!==this.indexOf(a,b,c)};a.prototype.indexOf=function(a,b,c){return C(this,a,b,c,!0)};a.prototype.lastIndexOf=function(a,b,c){return C(this,a,b,c,!1)};a.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-
b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return G(L(a,this.length-b),this,b,c);case "ascii":return G(O(a),
this,b,c);case "latin1":case "binary":return G(O(a),this,b,c);case "base64":return G(F.toByteArray(N(a)),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=a;for(var e=this.length-b,h=[],f=0;f<d.length&&!(0>(e-=2));++f){var l=d.charCodeAt(f);a=l>>8;l%=256;h.push(l);h.push(a)}return G(h,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};
var P=4096;a.prototype.slice=function(b,c){var e=this.length;b=~~b;c=void 0===c?e:~~c;0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);c<b&&(c=b);e=this.subarray(b,c);e.__proto__=a.prototype;return e};a.prototype.readUIntLE=function(a,b,c){a>>>=0;b>>>=0;c||A(a,b,this.length);c=this[a];for(var e=1,d=0;++d<b&&(e*=256);)c+=this[a+d]*e;return c};a.prototype.readUIntBE=function(a,b,c){a>>>=0;b>>>=0;c||A(a,b,this.length);c=this[a+--b];for(var e=1;0<b&&(e*=256);)c+=this[a+--b]*e;return c};
a.prototype.readUInt8=function(a,b){a>>>=0;b||A(a,1,this.length);return this[a]};a.prototype.readUInt16LE=function(a,b){a>>>=0;b||A(a,2,this.length);return this[a]|this[a+1]<<8};a.prototype.readUInt16BE=function(a,b){a>>>=0;b||A(a,2,this.length);return this[a]<<8|this[a+1]};a.prototype.readUInt32LE=function(a,b){a>>>=0;b||A(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};a.prototype.readUInt32BE=function(a,b){a>>>=0;b||A(a,4,this.length);return 16777216*this[a]+(this[a+
1]<<16|this[a+2]<<8|this[a+3])};a.prototype.readIntLE=function(a,b,c){a>>>=0;b>>>=0;c||A(a,b,this.length);c=this[a];for(var e=1,d=0;++d<b&&(e*=256);)c+=this[a+d]*e;c>=128*e&&(c-=Math.pow(2,8*b));return c};a.prototype.readIntBE=function(a,b,c){a>>>=0;b>>>=0;c||A(a,b,this.length);c=b;for(var e=1,d=this[a+--c];0<c&&(e*=256);)d+=this[a+--c]*e;d>=128*e&&(d-=Math.pow(2,8*b));return d};a.prototype.readInt8=function(a,b){a>>>=0;b||A(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};a.prototype.readInt16LE=
function(a,b){a>>>=0;b||A(a,2,this.length);var c=this[a]|this[a+1]<<8;return c&32768?c|4294901760:c};a.prototype.readInt16BE=function(a,b){a>>>=0;b||A(a,2,this.length);var c=this[a+1]|this[a]<<8;return c&32768?c|4294901760:c};a.prototype.readInt32LE=function(a,b){a>>>=0;b||A(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};a.prototype.readInt32BE=function(a,b){a>>>=0;b||A(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};a.prototype.readFloatLE=function(a,
b){a>>>=0;b||A(a,4,this.length);return J.read(this,a,!0,23,4)};a.prototype.readFloatBE=function(a,b){a>>>=0;b||A(a,4,this.length);return J.read(this,a,!1,23,4)};a.prototype.readDoubleLE=function(a,b){a>>>=0;b||A(a,8,this.length);return J.read(this,a,!0,52,8)};a.prototype.readDoubleBE=function(a,b){a>>>=0;b||A(a,8,this.length);return J.read(this,a,!1,52,8)};a.prototype.writeUIntLE=function(a,b,c,d){a=+a;b>>>=0;c>>>=0;d||B(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+
e]=a/d&255;return b+c};a.prototype.writeUIntBE=function(a,b,c,d){a=+a;b>>>=0;c>>>=0;d||B(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};a.prototype.writeUInt8=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,1,255,0);this[b]=a&255;return b+1};a.prototype.writeUInt16LE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,2,65535,0);this[b]=a&255;this[b+1]=a>>>8;return b+2};a.prototype.writeUInt16BE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,2,65535,0);
this[b]=a>>>8;this[b+1]=a&255;return b+2};a.prototype.writeUInt32LE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&255;return b+4};a.prototype.writeUInt32BE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};a.prototype.writeIntLE=function(a,b,c,d){a=+a;b>>>=0;d||(d=Math.pow(2,8*c-1),B(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&
(e*=256);)0>a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};a.prototype.writeIntBE=function(a,b,c,d){a=+a;b>>>=0;d||(d=Math.pow(2,8*c-1),B(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};a.prototype.writeInt8=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,1,127,-128);0>a&&(a=255+a+1);this[b]=a&255;return b+1};a.prototype.writeInt16LE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,2,32767,
-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};a.prototype.writeInt16BE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};a.prototype.writeInt32LE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};a.prototype.writeInt32BE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=
a>>>8;this[b+3]=a&255;return b+4};a.prototype.writeFloatLE=function(a,b,c){return y(this,a,b,!0,c)};a.prototype.writeFloatBE=function(a,b,c){return y(this,a,b,!1,c)};a.prototype.writeDoubleLE=function(a,b,c){return M(this,a,b,!0,c)};a.prototype.writeDoubleBE=function(a,b,c){return M(this,a,b,!1,c)};a.prototype.copy=function(a,b,c,d){c||(c=0);d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");
if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e)for(d=0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e};a.prototype.fill=function(b,c,d,f){if("string"===typeof b){"string"===typeof c?(f=c,c=0,d=this.length):"string"===typeof d&&
(f=d,d=this.length);if(1===b.length){var e=b.charCodeAt(0);256>e&&(b=e)}if(void 0!==f&&"string"!==typeof f)throw new TypeError("encoding must be a string");if("string"===typeof f&&!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);}else"number"===typeof b&&(b&=255);if(0>c||this.length<c||this.length<d)throw new RangeError("Out of range index");if(d<=c)return this;c>>>=0;d=void 0===d?this.length:d>>>0;b||(b=0);if("number"===typeof b)for(f=c;f<d;++f)this[f]=b;else for(b=a.isBuffer(b)?b:new a(b,
f),e=b.length,f=0;f<d-c;++f)this[f+c]=b[f%e];return this};var R=/[^+/0-9A-Za-z-_]/g},{"base64-js":23,ieee754:27}],26:[function(n,q,k){function c(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function a(a){return"function"===typeof a}function p(a){return"object"===typeof a&&null!==a}q.exports=c;c.EventEmitter=c;c.prototype._events=void 0;c.prototype._maxListeners=void 0;c.defaultMaxListeners=10;c.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");
this._maxListeners=a;return this};c.prototype.emit=function(b){var c;this._events||(this._events={});if("error"===b&&(!this._events.error||p(this._events.error)&&!this._events.error.length)){var d=arguments[1];if(d instanceof Error)throw d;var k=Error('Uncaught, unspecified "error" event. ('+d+")");k.context=d;throw k;}k=this._events[b];if(void 0===k)return!1;if(a(k))switch(arguments.length){case 1:k.call(this);break;case 2:k.call(this,arguments[1]);break;case 3:k.call(this,arguments[1],arguments[2]);
break;default:d=Array.prototype.slice.call(arguments,1),k.apply(this,d)}else if(p(k)){d=Array.prototype.slice.call(arguments,1);var n=k.slice();k=n.length;for(c=0;c<k;c++)n[c].apply(this,d)}return!0};c.prototype.addListener=function(b,f){var d;if(!a(f))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",b,a(f.listener)?f.listener:f);this._events[b]?p(this._events[b])?this._events[b].push(f):this._events[b]=[this._events[b],
f]:this._events[b]=f;p(this._events[b])&&!this._events[b].warned&&(d=void 0!==this._maxListeners?this._maxListeners:c.defaultMaxListeners)&&0<d&&this._events[b].length>d&&(this._events[b].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length),"function"===typeof console.trace&&console.trace());return this};c.prototype.on=c.prototype.addListener;c.prototype.once=function(b,c){function d(){this.removeListener(b,
d);f||(f=!0,c.apply(this,arguments))}if(!a(c))throw TypeError("listener must be a function");var f=!1;d.listener=c;this.on(b,d);return this};c.prototype.removeListener=function(b,c){if(!a(c))throw TypeError("listener must be a function");if(!this._events||!this._events[b])return this;var d=this._events[b];var f=d.length;var k=-1;if(d===c||a(d.listener)&&d.listener===c)delete this._events[b],this._events.removeListener&&this.emit("removeListener",b,c);else if(p(d)){for(;0<f--;)if(d[f]===c||d[f].listener&&
d[f].listener===c){k=f;break}if(0>k)return this;1===d.length?(d.length=0,delete this._events[b]):d.splice(k,1);this._events.removeListener&&this.emit("removeListener",b,c)}return this};c.prototype.removeAllListeners=function(b){if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[b]&&delete this._events[b],this;if(0===arguments.length){for(c in this._events)"removeListener"!==c&&this.removeAllListeners(c);this.removeAllListeners("removeListener");
this._events={};return this}var c=this._events[b];if(a(c))this.removeListener(b,c);else if(c)for(;c.length;)this.removeListener(b,c[c.length-1]);delete this._events[b];return this};c.prototype.listeners=function(b){return this._events&&this._events[b]?a(this._events[b])?[this._events[b]]:this._events[b].slice():[]};c.prototype.listenerCount=function(b){if(this._events){b=this._events[b];if(a(b))return 1;if(b)return b.length}return 0};c.listenerCount=function(a,c){return a.listenerCount(c)}},{}],27:[function(n,
q,k){k.read=function(c,a,k,b,f){var d=8*f-b-1;var n=(1<<d)-1,p=n>>1,q=-7;f=k?f-1:0;var m=k?-1:1,x=c[a+f];f+=m;k=x&(1<<-q)-1;x>>=-q;for(q+=d;0<q;k=256*k+c[a+f],f+=m,q-=8);d=k&(1<<-q)-1;k>>=-q;for(q+=b;0<q;d=256*d+c[a+f],f+=m,q-=8);if(0===k)k=1-p;else{if(k===n)return d?NaN:Infinity*(x?-1:1);d+=Math.pow(2,b);k-=p}return(x?-1:1)*d*Math.pow(2,k-b)};k.write=function(c,a,k,b,f,d){var n,p=8*d-f-1,q=(1<<p)-1,m=q>>1,x=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;d=b?0:d-1;var C=b?1:-1,w=0>a||0===a&&0>1/a?1:0;a=
Math.abs(a);isNaN(a)||Infinity===a?(a=isNaN(a)?1:0,b=q):(b=Math.floor(Math.log(a)/Math.LN2),1>a*(n=Math.pow(2,-b))&&(b--,n*=2),a=1<=b+m?a+x/n:a+x*Math.pow(2,1-m),2<=a*n&&(b++,n/=2),b+m>=q?(a=0,b=q):1<=b+m?(a=(a*n-1)*Math.pow(2,f),b+=m):(a=a*Math.pow(2,m-1)*Math.pow(2,f),b=0));for(;8<=f;c[k+d]=a&255,d+=C,a/=256,f-=8);b=b<<f|a;for(p+=f;0<p;c[k+d]=b&255,d+=C,b/=256,p-=8);c[k+d-C]|=128*w}},{}]},{},[3])(3)});
